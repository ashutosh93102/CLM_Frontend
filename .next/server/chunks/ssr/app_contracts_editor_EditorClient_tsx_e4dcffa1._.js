module.exports=[94576,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(52072),f=a.i(49076),g=a.i(98448),h=a.i(41417);let i=()=>{let a,i,j=(0,d.useRouter)(),k=(0,d.useSearchParams)(),l=k?.get("id")||"",[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),C=(0,c.useRef)(null),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(0),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(!1),V=(0,c.useRef)(0),W=(0,c.useRef)(0),X=(0,c.useRef)(null),Y=(0,c.useRef)(null);(0,c.useMemo)(()=>l?`clm:contractEditor:snapshot:v2:${l}`:null,[l]);let[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)([{email:"",name:""}]),[ab,ac]=(0,c.useState)("sequential"),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(null),[ah,ai]=(0,c.useState)(null),[aj,ak]=(0,c.useState)(!1),[al,am]=(0,c.useState)(null),[an,ao]=(0,c.useState)(null),[ap,aq]=(0,c.useState)(!1),ar=(0,c.useRef)(!1),as=a=>a?.contract??a?.data?.contract??a?.data??a,at=a=>{};(0,c.useEffect)(()=>{},[l]),(0,c.useEffect)(()=>{},[l,y]);let au=a=>{let b=a;if("string"==typeof b)try{b=JSON.parse(b)}catch{b={}}return b&&"object"==typeof b?b:{}},av=a=>{let b=String(a||"").trim();if(!b)return!0;let c=b.replace(/\s+/g,"").replace(/&nbsp;/g,"").toLowerCase();return!!new Set(["<p></p>","<p><br></p>","<p><br/></p>","<p><br/></p><p><br/></p>","<p></p><p></p>"]).has(c)||0===c.replace(/<[^>]*>/g,"").length},aw=a=>{let b=(a||"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;").split(/\n{2,}/).map(a=>a.replace(/\n/g,"<br/>")).filter(a=>a.trim().length>0);return b.length?b.map(a=>`<p>${a}</p>`).join(""):"<p></p>"},ax=(a,b)=>{let c=URL.createObjectURL(a),d=document.createElement("a");d.href=c,d.download=b,document.body.appendChild(d),d.click(),d.remove(),URL.revokeObjectURL(c)};(0,c.useEffect)(()=>{let a=!0;return async function(){if(!l){n(!1),p("Missing contract id");return}try{n(!0),p(null);let b=new g.ApiClient,[c,d]=await Promise.all([b.getContractById(l),b.getContractContent(l)]);if(!a)return;if(c.success){let a=c.data,b=as(a);r(b);let e=au(b?.metadata),f=d?.success?d.data:null,g=(f?.client_updated_at_ms||e?.editor_client_updated_at_ms,f?.rendered_html||b?.rendered_html||e?.rendered_html),h=f?.rendered_text||b?.rendered_text||e?.rendered_text||b?.raw_text||e?.raw_text||"",i=g&&String(g).trim().length>0?String(g):"",j=String(h||""),k=i,l=j,m=av(k)?aw(String(l||"")):String(k);I(m||""),K(String(l||"")),M(!1),S(null),G(!0)}else p(c.error||"Failed to load contract")}catch(b){if(!a)return;p(b instanceof Error?b.message:"Failed to load contract")}finally{a&&n(!1)}}(),()=>{a=!1}},[l]),(0,c.useEffect)(()=>{if(l)try{let a=localStorage.getItem(`clm:contractGenerationContext:v1:${l}`);if(!a)return void ao(null);let b=JSON.parse(a);if(!b||"object"!=typeof b)return void ao(null);ao({contractId:String(b.contractId||l),template:String(b.template||""),fieldValues:b.fieldValues||{},selectedClauseIds:Array.isArray(b.selectedClauseIds)?b.selectedClauseIds:[],customClauses:Array.isArray(b.customClauses)?b.customClauses:[],constraints:Array.isArray(b.constraints)?b.constraints:[],updatedAt:Number(b.updatedAt||0),createdAt:Number(b.createdAt||0)})}catch{ao(null)}},[l]),(0,c.useEffect)(()=>{if(F||!l||!q)return;let a=au(q?.metadata),b=q?.rendered_html||a?.rendered_html,c=q?.rendered_text||a?.rendered_text||q?.raw_text||a?.raw_text||"";I((b&&String(b).trim().length>0?String(b):aw(c))||""),K(String(c||"")),M(!1),S(null),G(!0)},[F,l,q?.id]),(0,c.useEffect)(()=>{if(!l||m||!q||ar.current)return;let a=au(q?.metadata),b=C.current?.getHTML?.()??H,c=String(C.current?.getText?.()??J??"").trim();if(!av(b)||c){ar.current=!0;return}let d=String(a?.template_filename||a?.template||q?.template_filename||an?.template||"").trim();if(!d)return;let e=(q?.form_inputs&&"object"==typeof q.form_inputs?q.form_inputs:a?.form_inputs&&"object"==typeof a.form_inputs?a.form_inputs:an?.fieldValues||{})||{},f=Array.isArray(q?.clauses)?q.clauses:[],h=f.filter(a=>a&&"library"===a.kind&&"string"==typeof a.clause_id).map(a=>String(a.clause_id)),i=f.filter(a=>a&&"constraint"===a.kind).map(a=>({name:String(a.name||""),value:String(a.value||"")})).filter(a=>a.name.trim()&&a.value.trim()),j=f.filter(a=>a&&"custom"===a.kind).map(a=>({title:String(a.title||"Custom Clause"),content:String(a.content||"")})).filter(a=>a.content.trim()),k=Array.from(new Set([...h,...Array.isArray(an?.selectedClauseIds)?an.selectedClauseIds.map(String):[]])),n=i.length?i:Array.isArray(an?.constraints)?an.constraints:[],o=j.length?j:Array.isArray(an?.customClauses)?an.customClauses:[];(async()=>{try{aq(!0);let a=new g.ApiClient,b=await a.previewContractFromFile({filename:d,structuredInputs:e,selectedClauses:k,customClauses:o,constraints:n});if(!b.success)return;let c=String(b.data?.rendered_text||"").trim();if(!c)return;let f=aw(c);C.current?.commands.setContent(f,{emitUpdate:!1}),I(f),K(c),M(!0),O(a=>a+1),await aA(),ar.current=!0}catch{}finally{aq(!1)}})()},[l,m,q?.id,an?.template]),(0,c.useEffect)(()=>{let a=!0;return async function(){try{t(!0),v(null);let b=new g.ApiClient,[c,d]=await Promise.all([b.listMyTemplateFiles(),b.listTemplateFiles()]);if(!a)return;let e=(c.success?c.data?.results:[])||[],f=(d.success?d.data?.results:[])||[],h=[],i=new Set;for(let a of e){let b=String(a?.filename||"").trim();!b||i.has(b)||(i.add(b),h.push({filename:b,name:String(a?.name||a?.filename||"Untitled"),description:a?.description?String(a.description):void 0,mine:!0}))}for(let a of f){let b=String(a?.filename||"").trim();!b||i.has(b)||(i.add(b),h.push({filename:b,name:String(a?.name||a?.filename||"Untitled"),description:a?.description?String(a.description):void 0,mine:!1}))}x(h)}catch(b){if(!a)return;v(b instanceof Error?b.message:"Failed to load templates")}finally{a&&t(!1)}}(),()=>{a=!1}},[]);let ay=q?.title||q?.name||"Contract",az=q?.updated_at?new Date(q.updated_at).toLocaleString():null,aA=async()=>{if(!l)return;let a=C.current?.getHTML()??H,b=C.current?.getText()??J,c=(0,h.sanitizeEditorHtml)(a),d=String(b||"");if(av(c)&&0===d.trim().length)return void S("Refusing to auto-save empty content. Type something or refresh if this was unexpected.");let e=Math.max(Date.now(),V.current||0),f=++W.current;try{X.current?.abort()}catch{}let i=new AbortController;X.current=i;try{Q(!0),S(null);let a=new g.ApiClient,b=await a.updateContractContent(l,{rendered_html:c,rendered_text:d,client_updated_at_ms:e},{signal:i.signal});if(f!==W.current)return;if(b.success){let a=as(b.data);r(a),at({html:c,text:d,client_updated_at_ms:e});try{window.dispatchEvent(new CustomEvent("contracts:changed",{detail:{id:l,updated_at:a?.updated_at||null}}))}catch{}(V.current||0)<=e&&M(!1)}else S(b.error||"Failed to save")}catch(b){let a=b instanceof Error?b.message:"Failed to save";String(a).toLowerCase().includes("abort")||S(a)}finally{f===W.current&&Q(!1)}},aB=async()=>{L&&await aA()};(0,c.useEffect)(()=>{let a=()=>{"visible"!==document.visibilityState&&aB()};return document.addEventListener("visibilitychange",a),()=>document.removeEventListener("visibilitychange",a)},[L,l]),(0,c.useEffect)(()=>{if(!D||!L||!F)return;let a=window.setTimeout(()=>{aA()},900);return()=>window.clearTimeout(a)},[N,L,D,l]);let aC=async a=>{let b=C.current;if(b)try{B(!0),v(null);let c=new g.ApiClient,d=await c.getTemplateFileContent(a);if(!d.success)return void v(d.error||"Failed to load template content");let e=String(d.data?.content||""),f=aw(e);b.commands.setContent(f,{emitUpdate:!1}),I(f),K(e),M(!0),O(a=>a+1),await aA()}catch(a){v(a instanceof Error?a.message:"Failed to apply template")}finally{B(!1)}},aD=async()=>{if(l)try{ak(!0),ag(null);let a=new g.ApiClient,b=await a.inhouseStatus(l);if(!b.success){let a=b.error||"Failed to fetch status";ag(a);return}am(b.data)}catch(a){ag(a instanceof Error?a.message:"Failed to fetch status")}finally{ak(!1)}},aE=async()=>{if(!l)return;let a=_.map(a=>({email:a.email.trim(),name:a.name.trim()})).filter(a=>a.email&&a.name);if(0===a.length)return void ag("Add at least one signer (name + email)");try{let b;ae(!0),ag(null);let c=new g.ApiClient,d=await c.inhouseStart({contract_id:l,signers:a,signing_order:ab});if(!d.success)return void ag(d.error||"Failed to start signing");let e=String(d.data?.signing_url||""),f=(b=(e||"").trim())?b.startsWith("/")||/^https?:\/\//i.test(b)?null:"Signing URL is invalid.":"Signing URL is missing";if(f){ag(f),ai(null);return}ai(e),window.open(e,"_blank","noopener,noreferrer"),$(!1),j.push(`/contracts/signing-status?id=${encodeURIComponent(l)}`);return}catch(a){ag(a instanceof Error?a.message:"Failed to start signing")}finally{ae(!1)}},aF=async()=>{if(!l)return;let a=String(al?.status||"").toLowerCase(),b=!!al?.all_signed;if("completed"!==a&&"executed"!==a||!b)return void ag("Signing is not completed yet.");let c=new g.ApiClient,d=await c.inhouseDownloadExecutedPdf(l);d.success&&d.data?ax(d.data,`${ay.replace(/\s+/g,"_")}_signed.pdf`):ag(d.error||"Failed to download signed PDF")},aG=async()=>{if(!l)return;let a=new g.ApiClient,b=await a.downloadContractPdf(l);b.success&&b.data?ax(b.data,`${ay.replace(/\s+/g,"_")}.pdf`):p(b.error||"Failed to download PDF")},aH=async()=>{if(!l)return;let a=new g.ApiClient,b=await a.downloadContractTxt(l);b.success&&b.data?ax(b.data,`${ay.replace(/\s+/g,"_")}.txt`):p(b.error||"Failed to download TXT")},aI=async()=>{if(l&&window.confirm("Delete this contract? This cannot be undone."))try{Q(!0),S(null);let a=new g.ApiClient,b=await a.deleteContract(l);if(!b.success)return void S(b.error||"Failed to delete contract");j.push("/contracts")}catch(a){S(a instanceof Error?a.message:"Failed to delete contract")}finally{Q(!1)}},aJ=(0,c.useMemo)(()=>{let a=y.trim().toLowerCase();return a?w.filter(b=>`${b.filename} ${b.name} ${b.description||""}`.toLowerCase().includes(a)):w},[w,y]);return(0,b.jsx)(e.default,{children:(0,b.jsxs)("div",{className:"bg-[#F2F0EB]",children:[(0,b.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0",children:[(0,b.jsx)("button",{onClick:async()=>{try{await aB()}finally{j.back()}},className:"w-10 h-10 rounded-full bg-white border border-black/10 shadow-sm grid place-items-center text-black/45 hover:text-black","aria-label":"Back",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 min-w-0",children:[(0,b.jsx)("h1",{className:"text-xl md:text-2xl font-bold text-[#111827] truncate",children:ay}),az&&(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,b.jsx)("span",{className:"text-xs text-black/45 font-medium",children:P?"Saving…":L?"Unsaved changes":`Updated ${az}`})]})]}),(0,b.jsxs)("p",{className:"text-xs text-black/40 mt-1 truncate",children:["Contract ID: ",String(l||"")]}),R&&(0,b.jsx)("p",{className:"text-xs text-rose-600 mt-1",children:R})]})]})}),o&&(0,b.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-2xl",children:o}),(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,b.jsxs)("section",{className:"col-span-12 lg:col-span-8 bg-white rounded-[28px] border border-black/5 shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"px-4 sm:px-6 pt-5 pb-4 border-b border-black/5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[#111827]",children:"Editor"}),(0,b.jsx)("div",{className:"w-full sm:w-auto",children:(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:flex-wrap sm:items-center sm:gap-2 relative justify-start sm:justify-end",children:[(0,b.jsxs)("button",{onClick:()=>{ag(null),ai(null),am(null),$(!0)},className:"col-span-1 h-9 sm:h-10 px-3 sm:px-4 rounded-full bg-white border border-black/10 text-[#0F141F] text-xs sm:text-sm font-semibold hover:bg-black/5",type:"button",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Send for signature"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Send"})]}),(0,b.jsxs)("button",{onClick:aG,className:"col-span-1 h-9 sm:h-10 px-3 sm:px-4 rounded-full bg-[#0F141F] text-white text-xs sm:text-sm font-semibold",type:"button",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Download"}),(0,b.jsx)("span",{className:"sm:hidden",children:"PDF"})]}),(0,b.jsx)("button",{onClick:()=>U(a=>!a),className:"col-span-1 w-9 h-9 sm:w-10 sm:h-10 rounded-full hover:bg-black/5 text-black/45 justify-self-end","aria-label":"More",type:"button",children:(0,b.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),T&&(0,b.jsxs)("div",{className:"absolute right-0 top-12 w-48 bg-white rounded-2xl border border-black/10 shadow-lg overflow-hidden z-20",children:[(0,b.jsx)("button",{onClick:()=>{U(!1),aG()},className:"w-full text-left px-4 py-3 text-sm hover:bg-black/5",type:"button",children:"Download PDF"}),(0,b.jsx)("button",{onClick:()=>{U(!1),aH()},className:"w-full text-left px-4 py-3 text-sm hover:bg-black/5",type:"button",children:"Download TXT"}),(0,b.jsx)("button",{onClick:()=>{U(!1),aA()},className:"w-full text-left px-4 py-3 text-sm hover:bg-black/5",type:"button",children:"Save now"}),(0,b.jsx)("div",{className:"h-px bg-black/5"}),(0,b.jsx)("button",{onClick:()=>{U(!1),aI()},className:"w-full text-left px-4 py-3 text-sm text-rose-600 hover:bg-rose-50",type:"button",children:"Delete contract"})]})]})})]}),(0,b.jsx)("div",{className:"px-4 sm:px-6 py-5 sm:py-6 overflow-y-auto",style:{maxHeight:"calc(100vh - 260px)"},children:m?(0,b.jsx)("div",{className:"text-sm text-black/45",children:"Loading contract…"}):q?ap?(0,b.jsx)("div",{className:"text-sm text-black/45",children:"Restoring template content…"}):(0,b.jsx)(f.default,{valueHtml:H,disabled:!1,onEditorReady:a=>{C.current=a,E(!!a)},onChange:(a,b)=>{I(a),K(b);let c=Date.now();V.current=c,M(!0),O(a=>a+1),Y.current&&window.clearTimeout(Y.current),Y.current=window.setTimeout(()=>{at({html:a,text:b,client_updated_at_ms:c})},250)},editorClassName:"min-h-[60vh] rounded-2xl border border-black/10 bg-white px-5 py-4 text-[13px] leading-6 text-slate-900 font-serif outline-none"}):(0,b.jsx)("div",{className:"text-sm text-black/45",children:"No contract found."})})]}),(0,b.jsx)("aside",{className:"col-span-12 lg:col-span-4 space-y-6",children:(0,b.jsxs)("div",{className:"bg-white rounded-[28px] border border-black/5 shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"px-4 sm:px-6 pt-6 pb-4 border-b border-black/5",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-[#111827]",children:"Add Template"}),(0,b.jsx)("p",{className:"text-xs text-black/45 mt-1",children:"Insert a template into the editor, then edit manually."})]}),(0,b.jsxs)("div",{className:"p-4 sm:p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-[#F6F3ED] rounded-full px-4 py-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-black/35",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,b.jsx)("input",{className:"bg-transparent outline-none text-sm w-full",placeholder:"Search templates…",value:y,onChange:a=>z(a.target.value)})]}),(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)("div",{className:"text-xs text-black/45 font-semibold",children:"Applying a template replaces the editor content."})}),u&&(0,b.jsx)("div",{className:"text-xs text-rose-600 mt-3",children:u}),(0,b.jsx)("div",{className:"mt-4 space-y-3 max-h-[38vh] overflow-y-auto pr-1",children:s?(0,b.jsx)("div",{className:"text-sm text-black/45",children:"Loading templates…"}):0===aJ.length?(0,b.jsx)("div",{className:"text-sm text-black/45",children:"No templates found."}):aJ.map(a=>(0,b.jsxs)("div",{className:"rounded-2xl border border-black/5 bg-[#F6F3ED] p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-[#111827] truncate",children:a.name}),(0,b.jsx)("p",{className:"text-[11px] text-black/45 mt-1 truncate",children:a.filename}),a.mine?(0,b.jsx)("p",{className:"text-[10px] mt-1 font-bold tracking-wider text-[#FF5C7A]",children:"MY TEMPLATE"}):null]}),(0,b.jsx)("button",{type:"button",onClick:()=>aC(a.filename),disabled:A,className:"h-9 px-3 rounded-full bg-white border border-black/10 text-sm font-semibold text-[#0F141F] hover:bg-black/5 disabled:opacity-60",children:"Add"})]}),a.description?(0,b.jsx)("p",{className:"text-xs text-black/45 mt-2 line-clamp-2",children:a.description}):null]},a.filename))})]})]})})]}),Z&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center p-4",role:"dialog","aria-modal":"true",children:(0,b.jsxs)("div",{className:"w-full max-w-xl bg-white rounded-[28px] border border-black/10 shadow-2xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"px-6 pt-6 pb-4 border-b border-black/5 flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-lg font-bold text-[#111827]",children:"Sign Now"}),(0,b.jsx)("p",{className:"text-xs text-black/45 mt-1",children:"Invite signers and open the signing link."})]}),(0,b.jsx)("button",{type:"button",onClick:()=>$(!1),className:"w-10 h-10 rounded-full hover:bg-black/5 text-black/45","aria-label":"Close",children:(0,b.jsx)("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-5",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[#111827]",children:"Signing order"}),(0,b.jsx)("div",{className:"text-xs text-black/45 mt-1",children:"Sequential = one-by-one. Parallel = invite all at once."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>ac("sequential"),className:`h-9 px-3 rounded-full border text-sm font-semibold ${"sequential"===ab?"bg-white border-black/30 text-[#0F141F]":"bg-white border-black/10 text-black/60 hover:bg-black/5"}`,children:"Sequential"}),(0,b.jsx)("button",{type:"button",onClick:()=>ac("parallel"),className:`h-9 px-3 rounded-full border text-sm font-semibold ${"parallel"===ab?"bg-white border-black/30 text-[#0F141F]":"bg-white border-black/10 text-black/60 hover:bg-black/5"}`,children:"Parallel"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[#111827]",children:"Signers"}),(0,b.jsx)("button",{type:"button",onClick:()=>aa(a=>[...a,{email:"",name:""}]),className:"h-9 px-3 rounded-full bg-white border border-black/10 text-sm font-semibold text-[#0F141F] hover:bg-black/5",children:"+ Add signer"})]}),(0,b.jsx)("div",{className:"space-y-3",children:_.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,b.jsx)("input",{className:"col-span-5 h-10 rounded-2xl bg-white border border-black/10 px-4 text-sm outline-none",placeholder:"Name",value:a.name,onChange:a=>aa(b=>b.map((b,d)=>d===c?{...b,name:a.target.value}:b))}),(0,b.jsx)("input",{className:"col-span-6 h-10 rounded-2xl bg-white border border-black/10 px-4 text-sm outline-none",placeholder:"Email",value:a.email,onChange:a=>aa(b=>b.map((b,d)=>d===c?{...b,email:a.target.value}:b))}),(0,b.jsx)("button",{type:"button",onClick:()=>aa(a=>a.filter((a,b)=>b!==c)),disabled:_.length<=1,className:"col-span-1 w-10 h-10 rounded-full hover:bg-rose-50 text-rose-600 disabled:opacity-40","aria-label":"Remove signer",children:(0,b.jsx)("svg",{className:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m2 0H7m2 0V5a2 2 0 012-2h2a2 2 0 012 2v2"})})})]},c))}),af&&(0,b.jsx)("div",{className:"text-xs text-rose-600",children:af}),ah?(0,b.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-[#F6F3ED] p-4",children:[(0,b.jsx)("div",{className:"text-xs text-black/45 font-semibold",children:"Signing link"}),(0,b.jsx)("div",{className:"mt-1 break-all text-sm text-[#111827]",children:ah})]}):null,al?(0,b.jsxs)("div",{className:"rounded-2xl border border-black/10 bg-white p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-black/45 font-semibold",children:"Status"}),(0,b.jsx)("div",{className:"text-sm font-semibold text-[#111827]",children:String(al?.status||"unknown")})]}),(0,b.jsx)("button",{type:"button",onClick:aF,disabled:(a=String(al?.status||"").toLowerCase(),i=!!al?.all_signed,"completed"!==a&&"executed"!==a||!i),className:"h-9 px-3 rounded-full bg-[#0F141F] text-white text-sm font-semibold",children:"Download signed PDF"})]}),al?.signers?.length?(0,b.jsxs)("div",{className:"mt-3 space-y-2",children:[al.signers.map(a=>{let c,d,e,f,g,h,i;return(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("div",{className:"text-black/70 truncate",children:String(a.name||a.email)}),(d=(c=String(a.status||"").trim()).toLowerCase(),e=a.signed_at?String(a.signed_at):"",f=["declined","rejected","canceled","cancelled","refused"].includes(d),g=["signed","completed","executed","done"].includes(d)||!!a.has_signed,h=["sent","invited","pending","in_progress","in progress","viewed"].includes(d),i=c||(g?"signed":f?"declined":h?"pending":"unknown"),(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,b.jsx)("span",{className:`px-2 py-1 rounded-full border text-[11px] font-semibold ${f?"bg-rose-50 text-rose-700 border-rose-200":g?"bg-emerald-50 text-emerald-700 border-emerald-200":h?"bg-amber-50 text-amber-800 border-amber-200":"bg-slate-50 text-slate-700 border-slate-200"}`,children:i}),e?(0,b.jsx)("span",{className:"text-[11px] text-black/40",children:e}):null]}))]},String(a.email))}),(Array.isArray(al?.signers)?al.signers:[]).some(a=>["declined","rejected","canceled","cancelled","refused"].includes(String(a?.status||"").toLowerCase()))?(0,b.jsx)("div",{className:"mt-2 text-[11px] text-rose-700",children:"One or more signers declined. Start signing again after updating recipients or document."}):null]}):null]}):null,(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:aD,disabled:aj,className:"h-10 px-4 rounded-full bg-white border border-black/10 text-black/70 text-sm font-semibold hover:bg-black/5 disabled:opacity-60",children:aj?"Checking…":"Check status"}),(0,b.jsx)("button",{type:"button",onClick:aE,disabled:ad,className:"h-10 px-4 rounded-full bg-[#FF5C7A] text-white text-sm font-semibold disabled:opacity-60",children:ad?"Starting…":"Start signing"})]})]})]})})]})})};function j(){return(0,b.jsx)(i,{})}a.s(["default",()=>j],94576)}];

//# sourceMappingURL=app_contracts_editor_EditorClient_tsx_e4dcffa1._.js.map