module.exports=[87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},23312,a=>{"use strict";let b=(0,a.i(70106).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);a.s(["Bell",()=>b],23312)},78854,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(52072),e=a.i(98448),f=a.i(23312),g=a.i(87532);let h=()=>{let[a,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)("pending"),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{try{j(!0),p(null);let a=new e.ApiClient,b=await a.getApprovals();if(!b.success)return void p(b.error||"Failed to load approvals");let c=Array.isArray(b.data)?b.data:b.data?.results||[],d=await Promise.all(c.map(async b=>{let c=`${b.entity_type||"Entity"} #${b.entity_id}`;if((b.entity_type||"").toLowerCase().includes("contract")&&b.entity_id){let d=await a.getContractById(String(b.entity_id));d.success&&d.data&&(c=d.data.title||d.data.name||c)}return{id:String(b.id),contractTitle:c,requester:b.requester_id?`Requester ${String(b.requester_id).slice(0,6)}`:"Requester",createdAt:b.created_at||new Date().toISOString(),status:b.status,priority:b.priority||"normal",entityType:b.entity_type,entityId:b.entity_id}}));h(d)}catch(a){p(a instanceof Error?a.message:"Unknown error")}finally{j(!1)}})()},[]);let q=a.filter(a=>"all"===k||a.status===k).filter(a=>{let b=m.trim().toLowerCase();return!b||a.contractTitle.toLowerCase().includes(b)||a.requester.toLowerCase().includes(b)}),r=a.filter(a=>"pending"!==a.status).length,s=2.4*(0!==a.filter(a=>"pending"!==a.status).length),t=async()=>{let a=new e.ApiClient,b=await a.getApprovals();if(!b.success)return;let c=Array.isArray(b.data)?b.data:b.data?.results||[];h(await Promise.all(c.map(async b=>{let c=`${b.entity_type||"Entity"} #${b.entity_id}`;if((b.entity_type||"").toLowerCase().includes("contract")&&b.entity_id){let d=await a.getContractById(String(b.entity_id));d.success&&d.data&&(c=d.data.title||d.data.name||c)}return{id:String(b.id),contractTitle:c,requester:b.requester_id?`Requester ${String(b.requester_id).slice(0,6)}`:"Requester",createdAt:b.created_at||new Date().toISOString(),status:b.status,priority:b.priority||"normal",entityType:b.entity_type,entityId:b.entity_id}})))},u=async a=>{let b=new e.ApiClient;await b.approveRequest(a),await t()},v=async a=>{let b=new e.ApiClient;await b.rejectRequest(a),await t()};return(0,b.jsxs)(d.default,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-extrabold text-slate-900",children:"Pending Approvals Inbox"}),(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Review and action contract requests"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative hidden sm:block",children:[(0,b.jsx)(g.Search,{className:"w-4 h-4 text-slate-400 absolute left-4 top-1/2 -translate-y-1/2"}),(0,b.jsx)("input",{value:m,onChange:a=>n(a.target.value),placeholder:"Search approvals...",className:"w-[320px] bg-white border border-slate-200 rounded-full pl-11 pr-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-rose-200"})]}),(0,b.jsx)("button",{className:"w-11 h-11 rounded-full bg-white border border-slate-200 inline-flex items-center justify-center","aria-label":"Notifications",children:(0,b.jsx)(f.Bell,{className:"w-5 h-5 text-slate-700"})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"rounded-3xl bg-gradient-to-br from-rose-400 to-pink-500 text-white p-6",children:[(0,b.jsx)("p",{className:"text-white/90 text-sm",children:"Items Awaiting You"}),(0,b.jsx)("p",{className:"text-4xl font-extrabold mt-2",children:String(a.filter(a=>"pending"===a.status).length).padStart(2,"0")}),(0,b.jsx)("div",{className:"mt-4 text-xs inline-flex items-center gap-2 bg-white/20 px-3 py-1 rounded-full",children:"↘ 3 Priority Tasks"})]}),(0,b.jsxs)("div",{className:"rounded-3xl bg-white border border-slate-200 p-6",children:[(0,b.jsx)("p",{className:"text-slate-500 text-sm",children:"Average Response Time"}),(0,b.jsxs)("p",{className:"text-3xl font-extrabold text-slate-900 mt-2",children:[s.toFixed(1),"h"]}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Top 10% in organizations"})]}),(0,b.jsxs)("div",{className:"rounded-3xl bg-white border border-slate-200 p-6",children:[(0,b.jsx)("p",{className:"text-slate-500 text-sm",children:"Monthly Decisions"}),(0,b.jsx)("p",{className:"text-3xl font-extrabold text-slate-900 mt-2",children:r}),(0,b.jsx)("p",{className:"text-xs text-emerald-600 mt-2 font-semibold",children:"+11% from last month"})]}),(0,b.jsxs)("div",{className:"rounded-3xl bg-white border border-slate-200 p-6",children:[(0,b.jsx)("p",{className:"text-slate-500 text-sm",children:"Filter"}),(0,b.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:["all","pending","approved","rejected"].map(a=>(0,b.jsx)("button",{onClick:()=>l(a),className:`px-3 py-2 rounded-xl text-xs font-semibold border transition ${k===a?"bg-[#0F141F] text-white border-[#0F141F]":"bg-white text-slate-700 border-slate-200 hover:bg-slate-50"}`,children:"all"===a?"All":a.charAt(0).toUpperCase()+a.slice(1)},a))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-6",children:[(0,b.jsxs)("div",{className:"xl:col-span-8 bg-white border border-slate-200 rounded-3xl p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-700",children:"Inbox Items"}),(0,b.jsx)("span",{className:"text-xs text-slate-500",children:q.length})]}),(0,b.jsx)("div",{className:"mt-4 space-y-3",children:i?(0,b.jsx)("div",{className:"text-sm text-slate-500 py-10 text-center",children:"Loading approvals…"}):o?(0,b.jsx)("div",{className:"text-sm text-rose-600 py-10 text-center",children:o}):0===q.length?(0,b.jsx)("div",{className:"text-sm text-slate-500 py-10 text-center",children:"No approvals to show"}):q.map(a=>(0,b.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white hover:bg-slate-50 transition p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[10px] font-bold px-2 py-1 rounded-full bg-slate-100 text-slate-600",children:"high"===a.priority?"HIGH PRIORITY":"low"===a.priority?"LOW PRIORITY":"NORMAL PRIORITY"}),(0,b.jsx)("span",{className:`text-[10px] px-2 py-1 rounded-full border ${{pending:"bg-amber-50 text-amber-700 border-amber-200",approved:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200"}[a.status]||"bg-slate-50 text-slate-700 border-slate-200"}`,children:a.status.toUpperCase()})]}),(0,b.jsx)("p",{className:"mt-2 font-semibold text-slate-900 truncate",children:a.contractTitle}),(0,b.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["Submitted ",new Date(a.createdAt).toLocaleString()," • Requester ",a.requester]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"px-4 py-2 rounded-xl border border-slate-200 text-sm font-semibold text-slate-700 hover:bg-white",onClick:()=>{(a.entityType||"").toLowerCase().includes("contract")&&(window.location.href=`/contracts/editor?id=${encodeURIComponent(a.entityId)}`)},children:"View Contract"}),"pending"===a.status?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"px-4 py-2 rounded-xl bg-[#0F141F] text-white text-sm font-semibold",onClick:()=>u(a.id),children:"Approve"}),(0,b.jsx)("button",{className:"px-4 py-2 rounded-xl bg-white border border-slate-200 text-rose-600 text-sm font-semibold",onClick:()=>v(a.id),children:"Reject"})]}):null]})]})},a.id))})]}),(0,b.jsxs)("div",{className:"xl:col-span-4 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-3xl p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,b.jsx)("p",{className:"text-sm font-extrabold text-slate-900",children:"Recent Decisions"})]}),(0,b.jsx)("div",{className:"mt-4 space-y-3",children:a.filter(a=>"pending"!==a.status).slice(0,3).map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:`mt-1 w-8 h-8 rounded-2xl flex items-center justify-center ${"approved"===a.status?"bg-emerald-50":"bg-rose-50"}`,children:(0,b.jsx)("span",{className:`w-2.5 h-2.5 rounded-full ${"approved"===a.status?"bg-emerald-500":"bg-rose-500"}`})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-900 truncate",children:"approved"===a.status?"Approved":"Rejected"}),(0,b.jsx)("p",{className:"text-xs text-slate-500 truncate",children:a.contractTitle})]})]},a.id))}),(0,b.jsx)("button",{className:"mt-6 w-full rounded-2xl border border-slate-200 bg-slate-50 py-3 text-sm font-semibold text-slate-700",children:"View Audit Log"})]}),(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-3xl p-6",children:[(0,b.jsx)("p",{className:"text-sm font-extrabold text-slate-900",children:"Approval Policy"}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Contracts over $50k require Legal and CFO approval."}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[(0,b.jsx)("span",{children:"Compliance Score"}),(0,b.jsx)("span",{className:"font-semibold text-rose-600",children:"98%"})]}),(0,b.jsx)("div",{className:"mt-2 h-2 rounded-full bg-slate-100 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full w-[98%] bg-gradient-to-r from-rose-400 to-pink-500"})})]})]})]})]})]})};function i(){return(0,b.jsx)(h,{})}a.s(["default",()=>i],78854)}];

//# sourceMappingURL=_f32512a1._.js.map