module.exports=[12400,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(52072),e=a.i(98448),f=a.i(74618),g=a.i(84505),h=a.i(77156),i=a.i(4720);let j=(0,a.i(70106).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var k=a.i(87532),l=a.i(81560);let m=a=>{let b=Number(a||0);if(b<1024)return`${b} B`;let c=b/1024;if(c<1024)return`${c.toFixed(0)} KB`;let d=c/1024;if(d<1024)return`${d.toFixed(1)} MB`;let e=d/1024;return`${e.toFixed(1)} GB`},n=a=>{if(!a)return"—";let b=new Date(a);return Number.isNaN(b.getTime())?"—":b.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},o=a=>"pdf"===(a||"").toLowerCase()?(0,b.jsx)("div",{className:"w-9 h-9 rounded-xl bg-rose-100 text-rose-600 flex items-center justify-center",children:(0,b.jsx)(i.FileText,{className:"w-5 h-5"})}):(0,b.jsx)("div",{className:"w-9 h-9 rounded-xl bg-sky-100 text-sky-600 flex items-center justify-center",children:(0,b.jsx)(i.FileText,{className:"w-5 h-5"})});function p(){let a,i,p=(0,c.useRef)(null),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(null),K=async()=>{t(null),r(!0);try{let a=new e.ApiClient,b=await a.listPrivateUploads();if(!b.success)throw Error(b.error||"Failed to load uploads");let c=b.data?.results||[];x(c)}catch(a){t(a instanceof Error?a.message:"Failed to load uploads")}finally{r(!1)}};(0,c.useEffect)(()=>{K()},[]);let L=(0,c.useMemo)(()=>{let a=y.trim().toLowerCase();return a?w.filter(b=>(b.filename||"").toLowerCase().includes(a)):w},[w,y]),M=async a=>{let b,c,d="pdf"!==(c=(b=(a.name||"").toLowerCase()).includes(".")?b.split(".").pop():"")&&"txt"!==c?"Only .pdf and .txt files are supported.":a.size>0x1900000?"File too large. Max size is 25MB.":null;if(d)return void t(d);r(!0),v(0),t(null);try{let b=new e.ApiClient,c=await b.uploadPrivateUploadWithProgress(a,{onProgress:({percent:a})=>{"number"==typeof a&&v(a)}});if(!c.success)throw Error(c.error||"Upload failed");await K()}catch(a){t(a instanceof Error?a.message:"Upload failed")}finally{r(!1),setTimeout(()=>v(null),350)}},N=async a=>{D(!0),F(a),H(null),J(null),t(null);try{let b=new e.ApiClient,c=await b.getPrivateUploadUrl(a.key);if(!c.success)throw Error(c.error||"Failed to get preview URL");let d=c.data?.url;if(!d)throw Error("No URL returned");H(d)}catch(a){t(a instanceof Error?a.message:"Failed to open preview")}},O=async a=>{t(null);try{let b=new e.ApiClient,c=await b.getPrivateUploadUrl(a.key);if(!c.success)throw Error(c.error||"Failed to get download URL");let d=c.data?.url;if(!d)throw Error("No URL returned");window.open(d,"_blank","noopener,noreferrer")}catch(a){t(a instanceof Error?a.message:"Download failed")}},P=async a=>{if(window.confirm(`Delete ${a.filename}?`)){t(null),r(!0);try{let b=new e.ApiClient,c=await b.deletePrivateUpload(a.key);if(!c.success)throw Error(c.error||"Delete failed");await K(),E?.key===a.key&&(D(!1),F(null),H(null),J(null))}catch(a){t(a instanceof Error?a.message:"Delete failed")}finally{r(!1)}}};return(0,b.jsx)(d.default,{children:(0,b.jsxs)("div",{className:"space-y-6 anim-fade-in",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("h1",{className:"text-3xl md:text-3xl font-extrabold text-slate-900 leading-tight",children:["Manage your",(0,b.jsx)("br",{className:"md:hidden"})," documents"]}),(0,b.jsx)("div",{className:"flex items-center gap-3 w-full md:w-auto",children:(0,b.jsxs)("div",{className:"relative w-full md:w-[360px]",children:[(0,b.jsx)(k.Search,{className:"w-4 h-4 text-slate-400 absolute left-4 top-1/2 -translate-y-1/2"}),(0,b.jsx)("input",{value:y,onChange:a=>z(a.target.value),placeholder:"Search...",className:"w-full bg-white border border-slate-200 rounded-full pl-10 pr-4 py-3 text-sm text-slate-800 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-rose-200"})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-[28px] p-6 md:p-8 shadow-sm",children:[(0,b.jsxs)("div",{className:"text-sm font-bold text-slate-900 flex items-center gap-2 mb-3",children:[(0,b.jsx)(f.UploadCloud,{className:"w-5 h-5 text-rose-500"}),"Private Uploads"]}),(0,b.jsxs)("div",{className:`relative rounded-[22px] border-2 border-dashed overflow-hidden transition-all duration-300 ease-out ${A?"border-rose-300 shadow-lg shadow-rose-100/70 scale-[1.01]":"border-rose-200"} ${q?"opacity-90":"hover:shadow-md hover:shadow-rose-100/50"}`,style:{background:"linear-gradient(180deg, rgba(255,92,122,0.85), rgba(255,92,122,0.70))"},onDragEnter:a=>{a.preventDefault(),a.stopPropagation(),B(!0)},onDragOver:a=>{a.preventDefault(),a.stopPropagation(),B(!0)},onDragLeave:a=>{a.preventDefault(),a.stopPropagation(),B(!1)},onDrop:a=>{a.preventDefault(),a.stopPropagation(),B(!1);let b=a.dataTransfer.files?.[0];b&&M(b)},children:[(0,b.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,b.jsx)("div",{className:`absolute inset-0 opacity-25 anim-shimmer transition-opacity ${A?"opacity-40":""}`,style:{background:"linear-gradient(90deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.18) 35%, rgba(255,255,255,0.06) 70%)"}}),(0,b.jsx)("div",{className:"absolute -top-24 -left-24 w-72 h-72 rounded-full bg-white/10 blur-3xl anim-breathe"}),(0,b.jsx)("div",{className:"absolute -bottom-24 -right-24 w-72 h-72 rounded-full bg-black/10 blur-3xl anim-breathe",style:{animationDelay:"250ms"}})]}),(0,b.jsxs)("div",{className:"px-6 py-12 md:py-14 flex flex-col items-center text-center text-white",children:[(0,b.jsxs)("div",{className:"relative mb-4",children:[(0,b.jsx)("div",{className:`absolute -inset-6 rounded-full bg-white/10 ${A?"animate-ping":"opacity-0"}`}),(0,b.jsx)("div",{className:`absolute -inset-10 rounded-full bg-white/5 ${"number"==typeof u?"animate-ping":"opacity-0"}`}),(0,b.jsx)("div",{className:`w-16 h-16 rounded-full bg-white/15 flex items-center justify-center transition-transform ${A?"scale-[1.05]":""} ${"number"==typeof u?"anim-breathe":"anim-float"}`,children:(0,b.jsx)(f.UploadCloud,{className:"w-7 h-7 text-white"})})]}),(0,b.jsx)("div",{className:"text-base md:text-lg font-extrabold",children:"Drag & Drop files here"}),(0,b.jsx)("div",{className:"text-xs md:text-sm text-white/90 mt-2",children:"Support for PDF and .TXT files"}),(0,b.jsx)("div",{className:"text-[11px] md:text-xs text-white/80 mt-1",children:"Max file size 25MB • Encryption Enabled"}),(0,b.jsx)("button",{type:"button",onClick:()=>p.current?.click(),className:"mt-6 inline-flex items-center justify-center rounded-full bg-white text-slate-900 px-5 py-2.5 text-sm font-semibold hover:bg-white/90 transition-transform duration-200 ease-out active:scale-[0.98]",disabled:q,children:"Choose file"}),(0,b.jsx)("input",{ref:p,type:"file",accept:".pdf,.txt,application/pdf,text/plain",className:"hidden",onChange:a=>{let b=a.target.files?.[0];b&&M(b),p.current&&(p.current.value="")}})]})]}),"number"==typeof u&&(0,b.jsx)("div",{className:"mt-4 anim-fade-up",children:(a=Math.min(100,Math.max(0,u)),i=`calc(${a}% - 10px)`,(0,b.jsxs)("div",{className:"rounded-2xl border border-rose-200 bg-white/70 px-4 py-3 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-700",children:[(0,b.jsx)("div",{className:"font-extrabold",children:"Uploading"}),(0,b.jsxs)("div",{className:"font-extrabold tabular-nums",children:[a,"%"]})]}),(0,b.jsxs)("div",{className:"mt-2 relative h-3 rounded-full bg-slate-100 border border-slate-200 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 opacity-50 anim-shimmer",style:{background:"linear-gradient(90deg, rgba(255,90,160,0.06) 0%, rgba(255,90,160,0.22) 35%, rgba(255,90,160,0.06) 70%)"}}),(0,b.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-rose-500 via-fuchsia-500 to-amber-400 transition-[width] duration-200",style:{width:`${a}%`}}),(0,b.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-white/80 border border-white shadow-[0_10px_30px_rgba(244,63,94,0.25)] blur-[0.2px] animate-pulse",style:{left:i}})]}),(0,b.jsx)("div",{className:"mt-2 text-[11px] font-semibold text-slate-600",children:"Securing & uploading to your vault…"})]}))}),s&&(0,b.jsx)("div",{className:"mt-4 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:s}),(0,b.jsx)("div",{className:"mt-8 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"text-sm font-extrabold text-slate-900 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-xl bg-slate-100 text-slate-700",children:(0,b.jsx)(j,{className:"w-4 h-4"})}),"My Private Files"]}),(0,b.jsx)("span",{className:"text-xs font-semibold text-slate-600 bg-slate-100 rounded-full px-2.5 py-1",children:w.length})]})}),(0,b.jsxs)("div",{className:"mt-4 rounded-2xl border border-slate-200 overflow-hidden",children:[(0,b.jsxs)("div",{className:"hidden md:grid grid-cols-12 bg-slate-50 px-5 py-3 text-[11px] font-bold text-slate-500 tracking-wide",children:[(0,b.jsx)("div",{className:"col-span-6",children:"FILE NAME"}),(0,b.jsx)("div",{className:"col-span-3",children:"UPLOAD DATE"}),(0,b.jsx)("div",{className:"col-span-2",children:"SIZE"}),(0,b.jsx)("div",{className:"col-span-1 text-right",children:"ACTIONS"})]}),(0,b.jsx)("div",{className:"divide-y divide-slate-100",children:q&&0===w.length?(0,b.jsx)("div",{className:"px-5 py-6 text-sm text-slate-500",children:"Loading…"}):0===L.length?(0,b.jsx)("div",{className:"px-5 py-6 text-sm text-slate-500",children:"No files found"}):L.map((a,c)=>(0,b.jsxs)("div",{className:"px-5 py-4 anim-fade-up",style:{animationDelay:`${20*Math.min(12,c)}ms`},children:[(0,b.jsxs)("div",{className:"hidden md:grid grid-cols-12 items-center",children:[(0,b.jsxs)("div",{className:"col-span-6 flex items-center gap-3 min-w-0",children:[o(a.file_type),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-slate-900 truncate",children:a.filename}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"Private"})]})]}),(0,b.jsx)("div",{className:"col-span-3 text-sm text-slate-600",children:n(a.uploaded_at)}),(0,b.jsx)("div",{className:"col-span-2 text-sm text-slate-600",children:m(a.size)}),(0,b.jsxs)("div",{className:"col-span-1 flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",className:"text-slate-500 hover:text-slate-800","aria-label":"View",onClick:()=>void N(a),disabled:q,children:(0,b.jsx)(h.Eye,{className:"w-4 h-4"})}),(0,b.jsx)("button",{type:"button",className:"text-slate-500 hover:text-slate-800","aria-label":"Download",onClick:()=>void O(a),disabled:q,children:(0,b.jsx)(g.Download,{className:"w-4 h-4"})}),(0,b.jsx)("button",{type:"button",className:"text-rose-500 hover:text-rose-700","aria-label":"Delete",onClick:()=>void P(a),disabled:q,children:(0,b.jsx)(l.Trash2,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"md:hidden flex items-center justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[o(a.file_type),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-slate-900 truncate",children:a.filename}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"Private"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,b.jsx)("button",{type:"button",className:"text-slate-500 hover:text-slate-800","aria-label":"View",onClick:()=>void N(a),disabled:q,children:(0,b.jsx)(h.Eye,{className:"w-4 h-4"})}),(0,b.jsx)("button",{type:"button",className:"text-slate-500 hover:text-slate-800","aria-label":"Download",onClick:()=>void O(a),disabled:q,children:(0,b.jsx)(g.Download,{className:"w-4 h-4"})}),(0,b.jsx)("button",{type:"button",className:"text-rose-500 hover:text-rose-700","aria-label":"Delete",onClick:()=>void P(a),disabled:q,children:(0,b.jsx)(l.Trash2,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"md:hidden mt-2 text-xs text-slate-600",children:[n(a.uploaded_at)," • ",m(a.size)]})]},a.key))})]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs text-slate-500",children:[(0,b.jsxs)("div",{children:["Showing ",Math.min(L.length,50)," of ",w.length," private files"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",className:"w-9 h-9 rounded-full border border-slate-200 bg-white text-slate-500 hover:bg-slate-50","aria-label":"Previous",disabled:!0,children:"‹"}),(0,b.jsx)("button",{type:"button",className:"w-9 h-9 rounded-full border border-slate-200 bg-white text-slate-500 hover:bg-slate-50","aria-label":"Next",disabled:!0,children:"›"})]})]})]}),C&&E&&(0,b.jsx)("div",{className:"fixed inset-0 z-[80] bg-black/40 flex items-center justify-center px-4 anim-fade-in",onClick:()=>D(!1),children:(0,b.jsxs)("div",{className:"w-full max-w-5xl bg-white rounded-2xl shadow-xl overflow-hidden anim-scale-in",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"px-5 py-4 border-b border-slate-100 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm font-bold text-slate-900 truncate",children:E.filename}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"Private preview"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>void O(E),children:[(0,b.jsx)(g.Download,{className:"w-4 h-4"}),"Download"]}),(0,b.jsxs)("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700 hover:bg-rose-100",onClick:()=>void P(E),children:[(0,b.jsx)(l.Trash2,{className:"w-4 h-4"}),"Delete"]}),(0,b.jsx)("button",{type:"button",className:"w-10 h-10 rounded-full border border-slate-200 bg-white text-slate-700 hover:bg-slate-50","aria-label":"Close",onClick:()=>D(!1),children:"✕"})]})]}),(0,b.jsx)("div",{className:"h-[70vh] bg-slate-50",children:G?"pdf"===(E.file_type||"").toLowerCase()?(0,b.jsx)("iframe",{title:"PDF preview",src:G,className:"w-full h-full"}):(0,b.jsx)("iframe",{title:"Text preview",src:G,className:"w-full h-full"}):(0,b.jsx)("div",{className:"h-full flex items-center justify-center text-sm text-slate-500",children:"Loading preview…"})})]})})]})})}a.s(["default",()=>p],12400)}];

//# sourceMappingURL=app_uploads_page_tsx_3111974c._.js.map