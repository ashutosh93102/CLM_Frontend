{"version":3,"sources":["../../../../app/lib/api-client.ts"],"sourcesContent":["/**\n * Production-grade API Client\n * All real endpoints - NO mock data\n * Handles authentication, error handling, and all CLM operations\n */\n\nexport interface ApiResponse<T = any> {\n  success: boolean\n  data?: T\n  error?: string\n  status: number\n}\n\nexport type AiMode = 'rewrite' | 'suggest' | 'summarize' | 'risk_spotting'\n\nexport interface AiRelevantClause {\n  clause_id: string\n  name?: string\n  similarity?: number\n}\n\nexport interface AiContextEvent {\n  relevant_clauses: AiRelevantClause[]\n}\n\nexport interface AiCitationsChange {\n  summary: string\n  clause_ids: string[]\n  policy_refs: string[]\n}\n\nexport interface AiCitationsEvent {\n  changes: AiCitationsChange[]\n}\n\nexport interface TenantAiPolicy {\n  tenant_id: string\n  scrub_pii: boolean\n  send_full_contract_text: boolean\n}\n\nexport interface Contract {\n  id: string\n  title: string\n  description?: string\n  status: 'draft' | 'pending' | 'approved' | 'rejected'\n  created_at: string\n  updated_at: string\n  value?: number\n  created_by?: string\n\n  // Detail fields (present on GET /contracts/{id}/)\n  metadata?: any\n  rendered_text?: string\n  rendered_html?: string\n}\n\nexport interface ContractContentResponse {\n  contract_id: string\n  r2_key?: string | null\n  client_updated_at_ms?: number | null\n  server_updated_at_ms?: number | null\n  rendered_text: string\n  rendered_html: string\n}\n\nexport interface ContractTemplate {\n  id: string\n  name: string\n  contract_type: string\n  description?: string\n  r2_key?: string\n  merge_fields?: string[]\n  status: string\n}\n\nexport interface Clause {\n  id: string\n  clause_id: string\n  name: string\n  version?: number\n  contract_type: string\n  content: string\n  status: string\n  is_mandatory?: boolean\n  tags?: any\n}\n\nexport interface ContractGenerateResponse {\n  contract: any\n  version: any\n  mandatory_clauses: any[]\n  clause_suggestions: Record<string, any>\n  validation_errors: any[]\n}\n\nexport interface ContractGenerateFromFileResponse {\n  contract: any\n  rendered_text: string\n  raw_text: string\n}\n\nexport interface TemplateFileResponse {\n  success: boolean\n  template_type: string\n  filename: string\n  content: string\n  size: number\n  display_name?: string\n  description?: string\n}\n\nexport interface FileTemplateItem {\n  id: string\n  filename: string\n  name: string\n  contract_type: string\n  description?: string\n  status: string\n  created_at?: string\n  updated_at?: string\n  created_by_id?: string\n  created_by_email?: string\n}\n\nexport interface FileTemplateContentResponse {\n  success: boolean\n  filename: string\n  name: string\n  template_type: string\n  content: string\n  size: number\n}\n\nexport interface TemplateSchemaField {\n  key: string\n  label: string\n  type: 'text' | 'number' | 'date' | 'select'\n  required: boolean\n  options?: string[]\n  in_template?: boolean\n}\n\nexport interface TemplateSchemaSection {\n  title: string\n  fields: TemplateSchemaField[]\n}\n\nexport interface TemplateFileSchemaResponse {\n  success: boolean\n  filename: string\n  name: string\n  template_type: string\n  placeholders: string[]\n  sections: TemplateSchemaSection[]\n  clauses_ui: {\n    allow_library_selection: boolean\n    allow_custom_clauses: boolean\n    allow_constraints: boolean\n  }\n}\n\nexport interface ContractPreviewFromFileResponse {\n  success: boolean\n  filename: string\n  contract_type: string\n  raw_text: string\n  rendered_text: string\n}\n\nexport interface Workflow {\n  id: string\n  name: string\n  description?: string\n  status: 'active' | 'inactive' | 'archived'\n  steps: WorkflowStep[]\n  created_at: string\n}\n\nexport interface WorkflowStep {\n  step_number: number\n  name: string\n  assigned_to: string[]\n  action_type?: string\n}\n\nexport interface ApprovalRequest {\n  id: string\n  entity_type: string\n  entity_id: string\n  requester_id: string\n  status: 'pending' | 'approved' | 'rejected'\n  comment?: string\n  priority?: 'low' | 'normal' | 'high'\n  created_at: string\n  updated_at: string\n}\n\nexport interface Notification {\n  id: string\n  type: string\n  subject: string\n  message: string\n  read: boolean\n  created_at: string\n  action_url?: string\n}\n\nexport interface SearchResult {\n  id: string\n  title: string\n  entity_type: string\n  content_preview: string\n  relevance_score: number\n}\n\nexport interface PrivateUploadItem {\n  key: string\n  filename: string\n  file_type: string\n  size: number\n  uploaded_at?: string | null\n}\n\nexport interface PrivateUploadsListResponse {\n  success: boolean\n  count: number\n  results: PrivateUploadItem[]\n}\n\nexport interface PrivateUploadUrlResponse {\n  success: boolean\n  key: string\n  url: string\n  expires_in: number\n}\n\nexport interface EsignSigner {\n  email: string\n  name: string\n}\n\nexport type EsignSigningOrder = 'sequential' | 'parallel'\n\nexport interface InhouseSigningRequestSigner {\n  email: string\n  name: string\n  status: string\n  signed_at?: string | null\n  has_signed?: boolean\n  recipient_index?: number\n}\n\nexport interface InhouseSigningRequestListItem {\n  id: string\n  provider?: 'inhouse'\n  contract_id: string\n  contract_title?: string\n  status: string\n  signing_order: EsignSigningOrder\n  sent_at?: string | null\n  completed_at?: string | null\n  expires_at?: string | null\n  last_activity_at?: string | null\n  created_at?: string | null\n  updated_at?: string | null\n  owner_email?: string | null\n  owner_name?: string | null\n  signers: InhouseSigningRequestSigner[]\n}\n\nexport interface InhouseSigningRequestsListResponse {\n  success: boolean\n  count: number\n  results: InhouseSigningRequestListItem[]\n  limit?: number\n  offset?: number\n}\n\nexport interface EsignStartRequest {\n  contract_id: string\n  signers: EsignSigner[]\n  signing_order?: EsignSigningOrder\n  expires_in_days?: number\n}\n\nexport interface EsignSigningUrlResponse {\n  success: boolean\n  signing_url: string\n  signer_email: string\n  expires_at?: string | null\n}\n\nexport interface SignatureFieldPosition {\n  x: number\n  y: number\n  width: number\n  height: number\n}\n\nexport interface TemplateSignatureFieldPlacement {\n  recipient_index: number\n  page_number: number\n  position: SignatureFieldPosition\n}\n\nexport interface TemplateSignatureFieldsConfig {\n  fields: Array<{\n    label?: string\n    type: 'signature'\n    page_number: number\n    position: SignatureFieldPosition\n    required?: boolean\n    recipient_index: number\n  }>\n  auto_stack?: boolean\n  stack_spacing?: number\n  source?: string\n}\n\nexport type ReviewContractStatus = 'uploaded' | 'processing' | 'ready' | 'failed'\n\nexport interface ReviewContractListItem {\n  id: string\n  title: string\n  original_filename: string\n  file_type: string\n  size_bytes: number\n  status: ReviewContractStatus\n  created_at: string\n  updated_at: string\n}\n\nexport interface ReviewContractDetail extends ReviewContractListItem {\n  r2_key: string\n  error_message?: string | null\n  analysis?: any\n  review_text?: string\n}\n\nexport interface ReviewContractsListResponse {\n  count: number\n  results: ReviewContractListItem[]\n}\n\nexport interface ReviewContractUrlResponse {\n  success: boolean\n  url: string\n  expires_in: number\n}\n\nexport interface CalendarEvent {\n  id: string\n  title: string\n  summary?: string\n  description?: string\n  start_datetime: string\n  end_datetime: string\n  all_day: boolean\n  category: 'renewal' | 'expiry' | 'meeting'\n  associated_contract_id?: string | null\n  associated_contract_title?: string\n  created_at?: string\n  updated_at?: string\n}\n\nimport { API_BASE_URL } from './env'\n\nexport class ApiClient {\n  private baseUrl: string\n  private token: string | null = null\n  private refreshToken: string | null = null\n\n  private static readonly API_V1_PREFIX = '/api/v1'\n\n  constructor(baseUrl: string = API_BASE_URL) {\n    this.baseUrl = String(baseUrl || API_BASE_URL).trim().replace(/\\/+$/, '')\n    this.loadTokens()\n  }\n\n  private loadTokens() {\n    if (typeof window !== 'undefined') {\n      this.token = localStorage.getItem('access_token')\n      this.refreshToken = localStorage.getItem('refresh_token')\n    }\n  }\n\n  private setTokens(access: string, refresh?: string) {\n    this.token = access\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('access_token', access)\n      if (refresh) {\n        this.refreshToken = refresh\n        localStorage.setItem('refresh_token', refresh)\n      }\n    }\n  }\n\n  private clearTokens() {\n    this.token = null\n    this.refreshToken = null\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('access_token')\n      localStorage.removeItem('refresh_token')\n    }\n  }\n\n  private async refreshAccessToken(): Promise<boolean> {\n    // Tokens may have been set by a different module (e.g. authAPI in api.ts)\n    // so always reload before attempting refresh.\n    this.loadTokens()\n    if (!this.refreshToken) return false\n\n    try {\n      const response = await fetch(`${this.baseUrl}/api/auth/refresh/`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ refresh: this.refreshToken }),\n      })\n\n      const data = await response.json().catch(() => ({}))\n      if (!response.ok) {\n        return false\n      }\n\n      const access = (data as any)?.access\n      const refresh = (data as any)?.refresh\n      if (access) {\n        this.setTokens(access, refresh)\n        return true\n      }\n\n      return false\n    } catch {\n      return false\n    }\n  }\n\n  private async request<T>(\n    method: string,\n    endpoint: string,\n    data?: any,\n    customHeaders?: Record<string, string>,\n    allowRetry: boolean = true,\n    options?: { auth?: boolean; signal?: AbortSignal }\n  ): Promise<ApiResponse<T>> {\n    try {\n      // Support the exported singleton `apiClient` and any long-lived instances.\n      this.loadTokens()\n\n      const headers: Record<string, string> = {\n        'Content-Type': 'application/json',\n        ...customHeaders,\n      }\n\n      const useAuth = options?.auth !== false\n\n      if (useAuth && this.token) {\n        headers['Authorization'] = `Bearer ${this.token}`\n      }\n\n      const config: RequestInit = {\n        method,\n        headers,\n        credentials: 'include',\n      }\n\n      if (options?.signal) {\n        config.signal = options.signal\n      }\n\n      if (data && (method === 'POST' || method === 'PUT' || method === 'PATCH')) {\n        config.body = JSON.stringify(data)\n      }\n\n      const response = await fetch(`${this.baseUrl}${endpoint}`, config)\n\n      if (response.status === 401) {\n        if (useAuth && allowRetry && (await this.refreshAccessToken())) {\n          return this.request(method, endpoint, data, customHeaders, false, options)\n        }\n        if (useAuth) {\n          this.clearTokens()\n          if (typeof window !== 'undefined') {\n            window.dispatchEvent(new Event('auth:logout'))\n          }\n        }\n        // Don't throw; let callers handle 401 explicitly.\n        return {\n          success: false,\n          error: 'Unauthorized - Please log in again',\n          status: 401,\n        }\n      }\n\n      const responseData = await response.json().catch(() => ({}))\n\n      if (!response.ok) {\n        return {\n          success: false,\n          error:\n            responseData.error ||\n            responseData.message ||\n            responseData.detail ||\n            responseData.details ||\n            'Request failed',\n          status: response.status,\n        }\n      }\n\n      return {\n        success: true,\n        data: responseData,\n        status: response.status,\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        status: 0,\n      }\n    }\n  }\n\n  private async multipartRequest<T>(\n    method: 'POST' | 'PUT' | 'PATCH',\n    endpoint: string,\n    formData: FormData,\n    allowRetry: boolean = true\n  ): Promise<ApiResponse<T>> {\n    try {\n      this.loadTokens()\n      const headers: Record<string, string> = {}\n      if (this.token) {\n        headers['Authorization'] = `Bearer ${this.token}`\n      }\n\n      const response = await fetch(`${this.baseUrl}${endpoint}`, {\n        method,\n        headers,\n        credentials: 'include',\n        body: formData,\n      })\n\n      if (response.status === 401) {\n        if (allowRetry && (await this.refreshAccessToken())) {\n          return this.multipartRequest(method, endpoint, formData, false)\n        }\n        return {\n          success: false,\n          error: 'Unauthorized - Please log in again',\n          status: 401,\n        }\n      }\n\n      const responseData = await response.json().catch(() => ({}))\n      if (!response.ok) {\n        return {\n          success: false,\n          error: (responseData as any)?.message || (responseData as any)?.detail || 'Request failed',\n          status: response.status,\n        }\n      }\n\n      return {\n        success: true,\n        data: responseData as T,\n        status: response.status,\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        status: 0,\n      }\n    }\n  }\n\n  private async multipartRequestWithProgress<T>(\n    method: 'POST' | 'PUT' | 'PATCH',\n    endpoint: string,\n    formData: FormData,\n    opts?: {\n      onProgress?: (info: { loaded: number; total?: number; percent?: number }) => void\n    }\n  ): Promise<ApiResponse<T>> {\n    // fetch() does not reliably expose upload progress; use XHR.\n    this.loadTokens()\n    const url = `${this.baseUrl}${endpoint}`\n\n    return new Promise((resolve) => {\n      try {\n        const xhr = new XMLHttpRequest()\n        xhr.open(method, url, true)\n        xhr.withCredentials = true\n        if (this.token) {\n          xhr.setRequestHeader('Authorization', `Bearer ${this.token}`)\n        }\n\n        if (xhr.upload && opts?.onProgress) {\n          xhr.upload.onprogress = (evt) => {\n            const total = evt.lengthComputable ? evt.total : undefined\n            const percent = total ? Math.round((evt.loaded / total) * 100) : undefined\n            opts.onProgress?.({ loaded: evt.loaded, total, percent })\n          }\n        }\n\n        xhr.onerror = () => {\n          resolve({ success: false, error: 'Network error', status: 0 })\n        }\n\n        xhr.onload = () => {\n          const status = xhr.status\n          const raw = xhr.responseText\n          let data: any = {}\n          try {\n            data = raw ? JSON.parse(raw) : {}\n          } catch {\n            data = {}\n          }\n\n          if (status === 401) {\n            // Best-effort: refresh is async and XHR cannot be retried without rebuilding FormData.\n            resolve({ success: false, error: 'Unauthorized - Please log in again', status: 401 })\n            return\n          }\n\n          if (status < 200 || status >= 300) {\n            resolve({ success: false, error: data?.message || data?.detail || 'Request failed', status })\n            return\n          }\n\n          resolve({ success: true, data: data as T, status })\n        }\n\n        xhr.send(formData)\n      } catch (e) {\n        resolve({ success: false, error: e instanceof Error ? e.message : 'Unknown error', status: 0 })\n      }\n    })\n  }\n\n  private async blobRequest(\n    endpoint: string,\n    allowRetry: boolean = true,\n    options?: { auth?: boolean }\n  ): Promise<ApiResponse<Blob>> {\n    try {\n      this.loadTokens()\n\n      const headers: Record<string, string> = {}\n      const useAuth = options?.auth !== false\n\n      if (useAuth && this.token) {\n        headers['Authorization'] = `Bearer ${this.token}`\n      }\n\n      const response = await fetch(`${this.baseUrl}${endpoint}`, {\n        method: 'GET',\n        headers,\n        credentials: 'include',\n      })\n\n      if (response.status === 401) {\n        if (useAuth && allowRetry && (await this.refreshAccessToken())) {\n          return this.blobRequest(endpoint, false, options)\n        }\n        return { success: false, error: 'Unauthorized - Please log in again', status: 401 }\n      }\n\n      if (!response.ok) {\n        return { success: false, error: 'Request failed', status: response.status }\n      }\n\n      const blob = await response.blob()\n      return { success: true, data: blob, status: response.status }\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        status: 0,\n      }\n    }\n  }\n\n  // ==================== AUTHENTICATION ====================\n  async register(email: string, password: string, fullName: string): Promise<ApiResponse> {\n    const response = await this.request('POST', '/api/auth/register/', {\n      email,\n      password,\n      full_name: fullName,\n    })\n\n    if (response.success && (response.data as any)?.access) {\n      this.setTokens((response.data as any).access, (response.data as any).refresh)\n    }\n\n    return response\n  }\n\n  async login(email: string, password: string): Promise<ApiResponse> {\n    const response = await this.request('POST', '/api/auth/login/', {\n      email,\n      password,\n    })\n\n    if (response.success && (response.data as any)?.access) {\n      this.setTokens((response.data as any).access, (response.data as any).refresh)\n    }\n\n    return response\n  }\n\n  async logout(): Promise<ApiResponse> {\n    const response = await this.request('POST', '/api/auth/logout/', {})\n    this.clearTokens()\n    return response\n  }\n\n  async getCurrentUser(): Promise<ApiResponse> {\n    return this.request('GET', '/api/auth/me/')\n  }\n\n  // ==================== ADMIN ====================\n  async getAdminMe(): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/admin/me/`)\n  }\n\n  async getAdminAnalytics(): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/admin/analytics/`)\n  }\n\n  async getAdminActivity(params?: { limit?: number }): Promise<ApiResponse> {\n    const limit = params?.limit ?? 50\n    const queryString = limit ? `?${new URLSearchParams({ limit: String(limit) }).toString()}` : ''\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/admin/activity/${queryString}`)\n  }\n\n  async adminListUsers(params?: { q?: string; allTenants?: boolean }): Promise<ApiResponse> {\n    const qs: Record<string, string> = {}\n    if (params?.q) qs.q = params.q\n    if (params?.allTenants) qs.all_tenants = '1'\n    const queryString = Object.keys(qs).length ? `?${new URLSearchParams(qs).toString()}` : ''\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/admin/users/${queryString}`)\n  }\n\n  async adminPromoteUser(payload: { user_id?: string; email?: string; allTenants?: boolean }): Promise<ApiResponse> {\n    const queryString = payload.allTenants ? '?all_tenants=1' : ''\n    const { allTenants, ...body } = payload\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/admin/users/promote/${queryString}`, body)\n  }\n\n  async adminDemoteUser(payload: { user_id?: string; email?: string; allTenants?: boolean }): Promise<ApiResponse> {\n    const queryString = payload.allTenants ? '?all_tenants=1' : ''\n    const { allTenants, ...body } = payload\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/admin/users/demote/${queryString}`, body)\n  }\n\n  async getAdminFeatureUsage(): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/admin/feature-usage/`)\n  }\n\n  async getAdminUserRegistration(): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/admin/user-registration/`)\n  }\n\n  async getAdminUserFeatureUsage(): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/admin/user-feature-usage/`)\n  }\n\n  // ==================== DASHBOARD ====================\n  async getDashboardInsights(): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/dashboard/insights/`)\n  }\n\n  // ==================== CONTRACTS ====================\n  async createContract(data: Partial<Contract>): Promise<ApiResponse<Contract>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/contracts/`, data)\n  }\n\n  async generateContract(params: {\n    templateId: string\n    structuredInputs?: Record<string, any>\n    userInstructions?: string\n    title?: string\n    selectedClauses?: string[]\n  }): Promise<ApiResponse<ContractGenerateResponse>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/contracts/generate/`, {\n      template_id: params.templateId,\n      structured_inputs: params.structuredInputs || {},\n      user_instructions: params.userInstructions,\n      title: params.title,\n      selected_clauses: params.selectedClauses || [],\n    })\n  }\n\n  async generateContractFromFile(params: {\n    filename: string\n    structuredInputs?: Record<string, any>\n    userInstructions?: string\n    title?: string\n    selectedClauses?: string[]\n    customClauses?: Array<{ title?: string; content: string }>\n    constraints?: Array<{ name: string; value: string }>\n  }): Promise<ApiResponse<ContractGenerateFromFileResponse>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/contracts/generate-from-file/`, {\n      filename: params.filename,\n      structured_inputs: params.structuredInputs || {},\n      user_instructions: params.userInstructions,\n      title: params.title,\n      selected_clauses: params.selectedClauses || [],\n      custom_clauses: params.customClauses || [],\n      constraints: params.constraints || [],\n    })\n  }\n\n  async getContracts(params?: Record<string, any>): Promise<ApiResponse> {\n    const queryString = params ? '?' + new URLSearchParams(params).toString() : ''\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/contracts/${queryString}`)\n  }\n\n  async getContractById(id: string): Promise<ApiResponse<Contract>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/contracts/${id}/`)\n  }\n\n  async getContractContent(id: string): Promise<ApiResponse<ContractContentResponse>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/contracts/${id}/content/`)\n  }\n\n  async updateContract(id: string, data: Partial<Contract>): Promise<ApiResponse<Contract>> {\n    return this.request('PUT', `${ApiClient.API_V1_PREFIX}/contracts/${id}/`, data)\n  }\n\n  async updateContractContent(\n    id: string,\n    data: { rendered_text?: string; rendered_html?: string; client_updated_at_ms?: number },\n    opts?: { signal?: AbortSignal }\n  ): Promise<ApiResponse<any>> {\n    return this.request('PATCH', `${ApiClient.API_V1_PREFIX}/contracts/${id}/content/`, data, undefined, true, {\n      signal: opts?.signal,\n    })\n  }\n\n  async streamContractAiGenerate(\n    id: string,\n    payload: { prompt: string; current_text?: string; mode?: AiMode; jurisdiction?: string },\n    handlers: {\n      onDelta: (delta: string) => void\n      onContext?: (ctx: AiContextEvent) => void\n      onCitations?: (citations: AiCitationsEvent) => void\n      onDone?: () => void\n      onError?: (error: string) => void\n      signal?: AbortSignal\n    }\n  ): Promise<void> {\n    this.loadTokens()\n    if (!this.token) {\n      handlers.onError?.('Not authenticated')\n      return\n    }\n\n    const doFetch = async () =>\n      fetch(`${this.baseUrl}${ApiClient.API_V1_PREFIX}/contracts/${id}/ai/generate-stream/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.token}`,\n        },\n        credentials: 'include',\n        body: JSON.stringify(payload),\n        signal: handlers.signal,\n      })\n\n    let response = await doFetch()\n    if (response.status === 401) {\n      const ok = await this.refreshAccessToken()\n      if (ok) {\n        response = await doFetch()\n      }\n    }\n\n    if (!response.ok || !response.body) {\n      const text = await response.text().catch(() => '')\n      handlers.onError?.(text || `Request failed (${response.status})`)\n      return\n    }\n\n    const reader = response.body.getReader()\n    const decoder = new TextDecoder()\n\n    let buffer = ''\n    const handleFrame = (frame: string) => {\n      // SSE frame is a set of lines terminated by a blank line.\n      // We care about: event: <name> and data: <json>\n      const lines = frame.split(/\\r?\\n/)\n      let eventName = 'message'\n      const dataLines: string[] = []\n      for (const line of lines) {\n        if (line.startsWith('event:')) eventName = line.slice(6).trim()\n        if (line.startsWith('data:')) dataLines.push(line.slice(5).trim())\n      }\n      const dataStr = dataLines.join('\\n')\n      if (!dataStr) return\n\n      if (eventName === 'delta') {\n        try {\n          const obj = JSON.parse(dataStr)\n          const delta = String(obj?.delta || '')\n          if (delta) handlers.onDelta(delta)\n        } catch {\n          // Fallback: treat as raw\n          handlers.onDelta(dataStr)\n        }\n        return\n      }\n\n      if (eventName === 'done') {\n        handlers.onDone?.()\n        return\n      }\n\n      if (eventName === 'context') {\n        try {\n          const obj = JSON.parse(dataStr)\n          handlers.onContext?.(obj as AiContextEvent)\n        } catch {\n          // ignore\n        }\n        return\n      }\n\n      if (eventName === 'citations') {\n        try {\n          const obj = JSON.parse(dataStr)\n          handlers.onCitations?.(obj as AiCitationsEvent)\n        } catch {\n          // ignore\n        }\n        return\n      }\n\n      if (eventName === 'error') {\n        try {\n          const obj = JSON.parse(dataStr)\n          handlers.onError?.(String(obj?.error || 'Unknown error'))\n        } catch {\n          handlers.onError?.(dataStr)\n        }\n      }\n    }\n\n    while (true) {\n      const { value, done } = await reader.read()\n      if (done) break\n      buffer += decoder.decode(value, { stream: true })\n\n      // Split on blank line delimiter. Keep any remainder.\n      while (true) {\n        const idx = buffer.indexOf('\\n\\n')\n        if (idx === -1) break\n        const frame = buffer.slice(0, idx)\n        buffer = buffer.slice(idx + 2)\n        if (frame.trim()) handleFrame(frame)\n      }\n    }\n\n    // Handle trailing frame if present.\n    if (buffer.trim()) handleFrame(buffer)\n  }\n\n  async streamTemplateAiGenerate(\n    payload: { prompt: string; current_text: string; contract_type?: string; mode?: AiMode; jurisdiction?: string },\n    handlers: {\n      onDelta: (delta: string) => void\n      onContext?: (ctx: AiContextEvent) => void\n      onCitations?: (citations: AiCitationsEvent) => void\n      onDone?: () => void\n      onError?: (error: string) => void\n      signal?: AbortSignal\n    }\n  ): Promise<void> {\n    this.loadTokens()\n    if (!this.token) {\n      handlers.onError?.('Not authenticated')\n      return\n    }\n\n    const doFetch = async () =>\n      fetch(`${this.baseUrl}${ApiClient.API_V1_PREFIX}/ai/generate/template-stream/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.token}`,\n        },\n        credentials: 'include',\n        body: JSON.stringify(payload),\n        signal: handlers.signal,\n      })\n\n    let response = await doFetch()\n    if (response.status === 401) {\n      const ok = await this.refreshAccessToken()\n      if (ok) {\n        response = await doFetch()\n      }\n    }\n\n    if (!response.ok || !response.body) {\n      const text = await response.text().catch(() => '')\n      handlers.onError?.(text || `Request failed (${response.status})`)\n      return\n    }\n\n    const reader = response.body.getReader()\n    const decoder = new TextDecoder()\n    let buffer = ''\n\n    const handleFrame = (frame: string) => {\n      const lines = frame.split(/\\r?\\n/)\n      let eventName = 'message'\n      const dataLines: string[] = []\n      for (const line of lines) {\n        if (line.startsWith('event:')) eventName = line.slice(6).trim()\n        if (line.startsWith('data:')) dataLines.push(line.slice(5).trim())\n      }\n      const dataStr = dataLines.join('\\n')\n      if (!dataStr) return\n\n      if (eventName === 'delta') {\n        try {\n          const obj = JSON.parse(dataStr)\n          const delta = String(obj?.delta || '')\n          if (delta) handlers.onDelta(delta)\n        } catch {\n          handlers.onDelta(dataStr)\n        }\n        return\n      }\n\n      if (eventName === 'done') {\n        handlers.onDone?.()\n        return\n      }\n\n      if (eventName === 'context') {\n        try {\n          const obj = JSON.parse(dataStr)\n          handlers.onContext?.(obj as AiContextEvent)\n        } catch {\n          // ignore\n        }\n        return\n      }\n\n      if (eventName === 'citations') {\n        try {\n          const obj = JSON.parse(dataStr)\n          handlers.onCitations?.(obj as AiCitationsEvent)\n        } catch {\n          // ignore\n        }\n        return\n      }\n\n      if (eventName === 'error') {\n        try {\n          const obj = JSON.parse(dataStr)\n          handlers.onError?.(String(obj?.error || 'Unknown error'))\n        } catch {\n          handlers.onError?.(dataStr)\n        }\n      }\n    }\n\n    while (true) {\n      const { value, done } = await reader.read()\n      if (done) break\n      buffer += decoder.decode(value, { stream: true })\n      while (true) {\n        const idx = buffer.indexOf('\\n\\n')\n        if (idx === -1) break\n        const frame = buffer.slice(0, idx)\n        buffer = buffer.slice(idx + 2)\n        if (frame.trim()) handleFrame(frame)\n      }\n    }\n\n    if (buffer.trim()) handleFrame(buffer)\n  }\n\n  async createContractFromContent(params: {\n    title: string\n    contract_type?: string\n    rendered_text?: string\n    rendered_html?: string\n    metadata?: Record<string, any>\n  }): Promise<ApiResponse<any>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/contracts/create-from-content/`, {\n      title: params.title,\n      contract_type: params.contract_type,\n      rendered_text: params.rendered_text,\n      rendered_html: params.rendered_html,\n      metadata: params.metadata,\n    })\n  }\n\n  async downloadContractTxt(id: string): Promise<ApiResponse<Blob>> {\n    return this.blobRequest(`${ApiClient.API_V1_PREFIX}/contracts/${id}/download-txt/`)\n  }\n\n  async downloadContractPdf(id: string): Promise<ApiResponse<Blob>> {\n    return this.blobRequest(`${ApiClient.API_V1_PREFIX}/contracts/${id}/download-pdf/`)\n  }\n\n  // ==================== INHOUSE E-SIGN ====================\n  async inhouseStart(params: {\n    contract_id: string\n    signers: EsignSigner[]\n    signing_order?: EsignSigningOrder\n    expires_in_days?: number\n  }): Promise<\n    ApiResponse<{\n      success: boolean\n      contract_id: string\n      status?: string\n      signing_order?: string\n      expires_at?: string | null\n      signing_url?: string | null\n      invite_urls?: Array<{ email: string; name: string; signing_url: string }>\n    }>\n  > {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/inhouse/esign/start/`, {\n      contract_id: params.contract_id,\n      signers: params.signers,\n      signing_order: params.signing_order || 'sequential',\n      expires_in_days: params.expires_in_days ?? 30,\n    })\n  }\n\n  async inhouseStatus(contractId: string, opts?: { signal?: AbortSignal }): Promise<ApiResponse<any>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/inhouse/esign/status/${contractId}/`, undefined, undefined, true, {\n      signal: opts?.signal,\n    })\n  }\n\n  async inhouseDownloadExecutedPdf(contractId: string): Promise<ApiResponse<Blob>> {\n    return this.blobRequest(`${ApiClient.API_V1_PREFIX}/inhouse/esign/executed/${contractId}/`)\n  }\n\n  async inhouseDownloadCertificate(contractId: string): Promise<ApiResponse<Blob>> {\n    return this.blobRequest(`${ApiClient.API_V1_PREFIX}/inhouse/esign/certificate/${contractId}/`)\n  }\n\n  async inhouseAudit(contractId: string, params?: { limit?: number }): Promise<ApiResponse<{ success: boolean; contract_id: string; logs: any[] }>> {\n    const qs = new URLSearchParams()\n    if (typeof params?.limit === 'number') qs.set('limit', String(params.limit))\n    const queryString = String(qs.toString() || '')\n    const suffix = queryString ? `?${queryString}` : ''\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/inhouse/esign/audit/${contractId}/${suffix}`)\n  }\n\n  async inhouseListSigningRequests(params?: {\n    q?: string\n    status?: string\n    limit?: number\n    offset?: number\n  }): Promise<ApiResponse<InhouseSigningRequestsListResponse>> {\n    const qs: Record<string, string> = {}\n    if (params?.q) qs.q = params.q\n    if (params?.status) qs.status = params.status\n    if (typeof params?.limit === 'number') qs.limit = String(params.limit)\n    if (typeof params?.offset === 'number') qs.offset = String(params.offset)\n    const queryString = Object.keys(qs).length ? `?${new URLSearchParams(qs).toString()}` : ''\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/inhouse/esign/requests/${queryString}`)\n  }\n\n  async inhouseSignerSession(token: string, deviceId?: string): Promise<ApiResponse<any>> {\n    const headers = deviceId ? { 'X-Device-Id': deviceId } : undefined\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/inhouse/esign/session/${token}/`, undefined, headers, true, {\n      auth: false,\n    })\n  }\n\n  async inhouseSignerSign(token: string, signature_data_url: string, deviceId?: string): Promise<ApiResponse<any>> {\n    const headers = deviceId ? { 'X-Device-Id': deviceId } : undefined\n    return this.request(\n      'POST',\n      `${ApiClient.API_V1_PREFIX}/inhouse/esign/sign/${token}/`,\n      { signature_data_url },\n      headers,\n      true,\n      { auth: false }\n    )\n  }\n\n\n  async getTenantAiPolicy(): Promise<ApiResponse<TenantAiPolicy>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/ai/policy/`)\n  }\n\n  async updateTenantAiPolicy(patch: Partial<Pick<TenantAiPolicy, 'scrub_pii' | 'send_full_contract_text'>>): Promise<ApiResponse<TenantAiPolicy>> {\n    return this.request('PUT', `${ApiClient.API_V1_PREFIX}/ai/policy/`, patch)\n  }\n\n  async submitAiFeedback(payload: {\n    feature: string\n    helpful: boolean\n    mode?: string\n    prompt?: string\n    contract_type?: string\n    metadata?: Record<string, any>\n  }): Promise<ApiResponse<{ id: string }>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/ai/feedback/`, payload)\n  }\n\n  async deleteContract(id: string): Promise<ApiResponse> {\n    return this.request('DELETE', `${ApiClient.API_V1_PREFIX}/contracts/${id}/`)\n  }\n\n  async cloneContract(id: string, newTitle: string): Promise<ApiResponse<Contract>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/contracts/${id}/clone/`, {\n      title: newTitle,\n    })\n  }\n\n  async getContractVersions(id: string): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/contracts/${id}/versions/`)\n  }\n\n  async createContractVersion(\n    id: string,\n    changeSummary: string,\n    selectedClauses?: string[]\n  ): Promise<ApiResponse> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/contracts/${id}/versions/`, {\n      change_summary: changeSummary,\n      selected_clauses: selectedClauses || [],\n    })\n  }\n\n  async getContractStatistics(): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/contracts/statistics/`)\n  }\n\n  async getRecentContracts(limit: number = 5): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/contracts/recent/?limit=${limit}`)\n  }\n\n  // ==================== CLAUSES ====================\n  async getClauses(params?: Record<string, any>): Promise<ApiResponse<Clause[]>> {\n    const queryString = params ? '?' + new URLSearchParams(params).toString() : ''\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/clauses/${queryString}`)\n  }\n\n  async getConstraintsLibrary(params?: Record<string, any>): Promise<ApiResponse<{ success: boolean; count: number; results: any[] }>> {\n    const queryString = params ? '?' + new URLSearchParams(params).toString() : ''\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/clauses/constraints-library/${queryString}`)\n  }\n\n  // ==================== TEMPLATES ====================\n  async createTemplate(data: Partial<ContractTemplate>): Promise<ApiResponse<ContractTemplate>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/contract-templates/`, data)\n  }\n\n  async getTemplates(): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/contract-templates/`)\n  }\n\n  async getTemplateById(id: string): Promise<ApiResponse<ContractTemplate>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/contract-templates/${id}/`)\n  }\n\n  async updateTemplate(\n    id: string,\n    data: Partial<ContractTemplate>\n  ): Promise<ApiResponse<ContractTemplate>> {\n    return this.request('PUT', `${ApiClient.API_V1_PREFIX}/contract-templates/${id}/`, data)\n  }\n\n  async deleteTemplate(id: string): Promise<ApiResponse> {\n    return this.request('DELETE', `${ApiClient.API_V1_PREFIX}/contract-templates/${id}/`)\n  }\n\n  async getTemplateFile(templateType: string): Promise<ApiResponse<TemplateFileResponse>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/templates/files/${templateType}/`, undefined, undefined, true, {\n      auth: false,\n    })\n  }\n\n  // ==================== DB-BACKED TEMPLATE FILES ====================\n  async listTemplateFiles(): Promise<ApiResponse<{ success: boolean; count: number; results: FileTemplateItem[] }>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/templates/files/`)\n  }\n\n  async createTemplateFile(params: { name?: string; filename?: string; description?: string; content: string }): Promise<ApiResponse<{ success: boolean; template: FileTemplateItem }>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/templates/files/`, params)\n  }\n\n  async listMyTemplateFiles(): Promise<ApiResponse<{ success: boolean; count: number; results: FileTemplateItem[] }>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/templates/files/mine/`)\n  }\n\n  async deleteTemplateFile(filename: string): Promise<ApiResponse<{ success: boolean; filename?: string }>> {\n    const safe = encodeURIComponent(filename)\n    return this.request('DELETE', `${ApiClient.API_V1_PREFIX}/templates/files/delete/${safe}/`)\n  }\n\n  async getTemplateFileContent(filename: string): Promise<ApiResponse<FileTemplateContentResponse>> {\n    const safe = encodeURIComponent(filename)\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/templates/files/content/${safe}/`, undefined, undefined, true, {\n      auth: false,\n    })\n  }\n\n  async getTemplateFileSchema(filename: string): Promise<ApiResponse<TemplateFileSchemaResponse>> {\n    const safe = encodeURIComponent(filename)\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/templates/files/schema/${safe}/`, undefined, undefined, true, {\n      auth: false,\n    })\n  }\n\n  async previewContractFromFile(params: {\n    filename: string\n    structuredInputs?: Record<string, any>\n    selectedClauses?: string[]\n    customClauses?: Array<{ title?: string; content: string }>\n    constraints?: Array<{ name: string; value: string }>\n  }): Promise<ApiResponse<ContractPreviewFromFileResponse>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/contracts/preview-from-file/`, {\n      filename: params.filename,\n      structured_inputs: params.structuredInputs || {},\n      selected_clauses: params.selectedClauses || [],\n      custom_clauses: params.customClauses || [],\n      constraints: params.constraints || [],\n    })\n  }\n\n  // ==================== TEMPLATE SIGNATURE FIELDS (FILE TEMPLATES) ====================\n  async getTemplateFileSignatureFieldsConfig(\n    filename: string\n  ): Promise<ApiResponse<{ success: boolean; filename: string; config: TemplateSignatureFieldsConfig; source?: string }>> {\n    const safe = encodeURIComponent(filename)\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/templates/files/signature-fields-config/${safe}/`)\n  }\n\n  async saveTemplateFileSignaturePositions(\n    filename: string,\n    positions: TemplateSignatureFieldPlacement[]\n  ): Promise<ApiResponse<{ success: boolean; filename: string; config: TemplateSignatureFieldsConfig }>> {\n    const safe = encodeURIComponent(filename)\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/templates/files/drag-signature-positions/${safe}/`, {\n      positions,\n    })\n  }\n\n  // ==================== WORKFLOWS ====================\n  async createWorkflow(data: Partial<Workflow>): Promise<ApiResponse<Workflow>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/workflows/`, data)\n  }\n\n  async getWorkflows(): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/workflows/`)\n  }\n\n  async getWorkflowById(id: string): Promise<ApiResponse<Workflow>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/workflows/${id}/`)\n  }\n\n  async updateWorkflow(id: string, data: Partial<Workflow>): Promise<ApiResponse<Workflow>> {\n    return this.request('PUT', `${ApiClient.API_V1_PREFIX}/workflows/${id}/`, data)\n  }\n\n  async deleteWorkflow(id: string): Promise<ApiResponse> {\n    return this.request('DELETE', `${ApiClient.API_V1_PREFIX}/workflows/${id}/`)\n  }\n\n  async getWorkflowInstances(workflowId: string): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/workflows/${workflowId}/instances/`)\n  }\n\n  // ==================== APPROVALS ====================\n  async createApproval(data: Partial<ApprovalRequest>): Promise<ApiResponse<ApprovalRequest>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/approvals/`, data)\n  }\n\n  async getApprovals(params?: Record<string, any>): Promise<ApiResponse> {\n    const queryString = params ? '?' + new URLSearchParams(params).toString() : ''\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/approvals/${queryString}`)\n  }\n\n  async getApprovalById(id: string): Promise<ApiResponse<ApprovalRequest>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/approvals/${id}/`)\n  }\n\n  async updateApproval(\n    id: string,\n    data: Partial<ApprovalRequest>\n  ): Promise<ApiResponse<ApprovalRequest>> {\n    return this.request('PUT', `${ApiClient.API_V1_PREFIX}/approvals/${id}/`, data)\n  }\n\n  async approveRequest(id: string, comment?: string): Promise<ApiResponse> {\n    return this.request('PUT', `${ApiClient.API_V1_PREFIX}/approvals/${id}/`, {\n      status: 'approved',\n      comment,\n    })\n  }\n\n  async rejectRequest(id: string, reason?: string): Promise<ApiResponse> {\n    return this.request('PUT', `${ApiClient.API_V1_PREFIX}/approvals/${id}/`, {\n      status: 'rejected',\n      comment: reason,\n    })\n  }\n\n  // ==================== NOTIFICATIONS ====================\n  async getNotifications(params?: Record<string, any>): Promise<ApiResponse> {\n    const queryString = params ? '?' + new URLSearchParams(params).toString() : ''\n    return this.request('GET', `/api/notifications/${queryString}`)\n  }\n\n  async createNotification(data: any): Promise<ApiResponse<Notification>> {\n    return this.request('POST', '/api/notifications/', data)\n  }\n\n  async markNotificationAsRead(id: string): Promise<ApiResponse> {\n    return this.request('PUT', `/api/notifications/${id}/`, { read: true })\n  }\n\n  // ==================== PRIVATE UPLOADS (R2-ONLY) ====================\n  async listPrivateUploads(): Promise<ApiResponse<PrivateUploadsListResponse>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/private-uploads/`)\n  }\n\n  async getPrivateUploadUrl(key: string): Promise<ApiResponse<PrivateUploadUrlResponse>> {\n    const encoded = encodeURIComponent(key)\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/private-uploads/url/?key=${encoded}`)\n  }\n\n  async deletePrivateUpload(key: string): Promise<ApiResponse<{ success: boolean }>> {\n    const encoded = encodeURIComponent(key)\n    return this.request('DELETE', `${ApiClient.API_V1_PREFIX}/private-uploads/?key=${encoded}`)\n  }\n\n  async uploadPrivateUpload(file: File): Promise<ApiResponse<any>> {\n    const form = new FormData()\n    form.append('file', file)\n    return this.multipartRequest('POST', `${ApiClient.API_V1_PREFIX}/private-uploads/`, form)\n  }\n\n  async uploadPrivateUploadWithProgress(\n    file: File,\n    opts?: { onProgress?: (info: { loaded: number; total?: number; percent?: number }) => void }\n  ): Promise<ApiResponse<any>> {\n    const form = new FormData()\n    form.append('file', file)\n    return this.multipartRequestWithProgress('POST', `${ApiClient.API_V1_PREFIX}/private-uploads/`, form, opts)\n  }\n\n  // ==================== REVIEW CONTRACTS ====================\n  async listReviewContracts(params?: { q?: string }): Promise<ApiResponse<ReviewContractsListResponse>> {\n    const qs = params?.q ? `?q=${encodeURIComponent(params.q)}` : ''\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/review-contracts/${qs}`)\n  }\n\n  async getReviewContractById(id: string): Promise<ApiResponse<ReviewContractDetail>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/review-contracts/${id}/`)\n  }\n\n  async uploadReviewContract(\n    file: File,\n    opts?: { title?: string; analyze?: boolean }\n  ): Promise<ApiResponse<{ success: boolean; review_contract: ReviewContractDetail }>> {\n    const form = new FormData()\n    form.append('file', file)\n    if (opts?.title) form.append('title', opts.title)\n    if (typeof opts?.analyze === 'boolean') form.append('analyze', String(opts.analyze))\n    return this.multipartRequest('POST', `${ApiClient.API_V1_PREFIX}/review-contracts/`, form)\n  }\n\n  async uploadReviewContractWithProgress(\n    file: File,\n    opts?: {\n      title?: string\n      analyze?: boolean\n      onProgress?: (info: { loaded: number; total?: number; percent?: number }) => void\n    }\n  ): Promise<ApiResponse<{ success: boolean; review_contract: ReviewContractDetail }>> {\n    const form = new FormData()\n    form.append('file', file)\n    if (opts?.title) form.append('title', opts.title)\n    if (typeof opts?.analyze === 'boolean') form.append('analyze', String(opts.analyze))\n    return this.multipartRequestWithProgress('POST', `${ApiClient.API_V1_PREFIX}/review-contracts/`, form, {\n      onProgress: opts?.onProgress,\n    })\n  }\n\n  async deleteReviewContract(id: string): Promise<ApiResponse<any>> {\n    return this.request('DELETE', `${ApiClient.API_V1_PREFIX}/review-contracts/${id}/`)\n  }\n\n  async getReviewContractUrl(id: string): Promise<ApiResponse<ReviewContractUrlResponse>> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/review-contracts/${id}/url/`)\n  }\n\n  async analyzeReviewContract(\n    id: string\n  ): Promise<ApiResponse<{ success: boolean; review_contract: ReviewContractDetail }>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/review-contracts/${id}/analyze/`, {})\n  }\n\n  async downloadReviewReportTxt(id: string): Promise<ApiResponse<Blob>> {\n    return this.blobRequest(`${ApiClient.API_V1_PREFIX}/review-contracts/${id}/report-txt/`)\n  }\n\n  async downloadReviewReportPdf(id: string): Promise<ApiResponse<Blob>> {\n    return this.blobRequest(`${ApiClient.API_V1_PREFIX}/review-contracts/${id}/report-pdf/`)\n  }\n\n  // ==================== CALENDAR EVENTS ====================\n  async listCalendarEvents(params: { start: string; end: string }): Promise<ApiResponse<{ results: CalendarEvent[] }>> {\n    const qs = new URLSearchParams({ start: params.start, end: params.end }).toString()\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/events/?${qs}`)\n  }\n\n  async createCalendarEvent(data: Partial<CalendarEvent>): Promise<ApiResponse<CalendarEvent>> {\n    return this.request('POST', `${ApiClient.API_V1_PREFIX}/events/`, data)\n  }\n\n  async updateCalendarEvent(id: string, data: Partial<CalendarEvent>): Promise<ApiResponse<CalendarEvent>> {\n    return this.request('PATCH', `${ApiClient.API_V1_PREFIX}/events/${id}/`, data)\n  }\n\n  async deleteCalendarEvent(id: string): Promise<ApiResponse> {\n    return this.request('DELETE', `${ApiClient.API_V1_PREFIX}/events/${id}/`)\n  }\n\n  // ==================== SEARCH ====================\n  async search(query: string, params?: Record<string, any>): Promise<ApiResponse> {\n    const fullParams = { q: query, ...params }\n    const queryString = '?' + new URLSearchParams(fullParams).toString()\n    return this.request('GET', `/api/search/${queryString}`)\n  }\n\n  async semanticSearch(query: string): Promise<ApiResponse> {\n    return this.request('GET', `/api/search/semantic/?q=${encodeURIComponent(query)}`)\n  }\n\n  async semanticSearchWithParams(query: string, params?: Record<string, any>): Promise<ApiResponse> {\n    const qs = new URLSearchParams({ q: query, ...(params || {}) }).toString()\n    return this.request('GET', `/api/search/semantic/?${qs}`)\n  }\n\n  async advancedSearch(data: any): Promise<ApiResponse> {\n    return this.request('POST', '/api/search/advanced/', data)\n  }\n\n  async getSearchSuggestions(query: string): Promise<ApiResponse> {\n    return this.request('GET', `/api/search/suggestions/?q=${encodeURIComponent(query)}`)\n  }\n\n  // ==================== DOCUMENTS ====================\n  async listDocuments(): Promise<ApiResponse> {\n    return this.request('GET', '/api/documents/')\n  }\n\n  async getRepository(): Promise<ApiResponse> {\n    return this.request('GET', '/api/repository/')\n  }\n\n  async getRepositoryFolders(): Promise<ApiResponse> {\n    return this.request('GET', '/api/repository/folders/')\n  }\n\n  async createFolder(name: string, parentId?: string): Promise<ApiResponse> {\n    return this.request('POST', '/api/repository/folders/', {\n      name,\n      parent_id: parentId,\n    })\n  }\n\n  // ==================== METADATA ====================\n  async createMetadataField(data: any): Promise<ApiResponse> {\n    return this.request('POST', '/api/metadata/fields/', data)\n  }\n\n  async getMetadataFields(): Promise<ApiResponse> {\n    return this.request('GET', '/api/metadata/fields/')\n  }\n\n  // ==================== HEALTH ====================\n  async getHealth(): Promise<ApiResponse> {\n    return this.request('GET', `${ApiClient.API_V1_PREFIX}/health/`)\n  }\n}\n\n// Singleton instance\nexport const apiClient = new ApiClient()\n"],"names":[],"mappings":"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"}