module.exports=[87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},31853,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(52072),e=a.i(50944),f=a.i(98448),g=a.i(4720),h=a.i(87532),i=a.i(81560);let j=()=>{let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)({total:0,draft:0,pending:0,approved:0,rejected:0}),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)("all"),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(null),w=(0,e.useRouter)(),x=c.default.useRef(0);(0,c.useEffect)(()=>{y();let a=()=>y();window.addEventListener("focus",a);let b=()=>{let a=Date.now();a-x.current<800||(x.current=a,y())};window.addEventListener("contracts:changed",b);let c=window.setInterval(()=>{"visible"===document.visibilityState&&y()},15e3);return()=>{window.removeEventListener("focus",a),window.removeEventListener("contracts:changed",b),window.clearInterval(c)}},[]);let y=async()=>{try{n(!0),p(null),x.current=Date.now();let a=new f.ApiClient,b=await a.getContracts();if(b.success){let a=Array.isArray(b.data)?b.data:b.data?.results||[];j(a);let c={total:a.length,draft:a.filter(a=>"draft"===a.status).length,pending:a.filter(a=>"pending"===a.status).length,approved:a.filter(a=>"approved"===a.status).length,rejected:a.filter(a=>"rejected"===a.status).length};l(c)}else p(b.error||"Failed to fetch contracts")}catch(a){p(a instanceof Error?a.message:"Unknown error")}finally{n(!1)}},z=async a=>{let b=String(a?.id||"").trim();if(!b)return;let c=String(a?.title||a?.name||"this contract");if(window.confirm(`Delete "${c}"? This cannot be undone.`))try{v(b),p(null);let a=new f.ApiClient,c=await a.deleteContract(b);if(!c.success)return void p(c.error||"Failed to delete contract");await y(),window.dispatchEvent(new Event("contracts:changed"))}catch(a){p(a instanceof Error?a.message:"Failed to delete contract")}finally{v(null)}},A=a=>{w.push(`/contracts/editor?id=${encodeURIComponent(a)}`)},B=("all"===q?a:a.filter(a=>a.status===q)).filter(a=>{let b=s.trim().toLowerCase();return!b||(a.title||a.name||"").toLowerCase().includes(b)});return(0,b.jsxs)(d.default,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-extrabold text-slate-900",children:"Contracts"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative hidden sm:block",children:[(0,b.jsx)(h.Search,{className:"w-4 h-4 text-slate-400 absolute left-4 top-1/2 -translate-y-1/2"}),(0,b.jsx)("input",{value:s,onChange:a=>t(a.target.value),placeholder:"Search contracts...",className:"w-[320px] bg-white border border-slate-200 rounded-full pl-11 pr-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-rose-200"})]}),(0,b.jsxs)("button",{onClick:()=>w.push("/create-contract"),className:"inline-flex items-center gap-2 rounded-full bg-[#0F141F] text-white px-5 py-3 text-sm font-semibold",children:[(0,b.jsx)(g.FileText,{className:"w-4 h-4"}),"New Contract"]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[{label:"Total",value:k.total},{label:"Draft",value:k.draft},{label:"Pending",value:k.pending},{label:"Approved",value:k.approved}].map(a=>(0,b.jsxs)("div",{className:"rounded-3xl bg-white border border-slate-200 p-6",children:[(0,b.jsx)("p",{className:"text-slate-500 text-sm",children:a.label}),(0,b.jsx)("p",{className:"text-4xl font-extrabold text-slate-900 mt-2",children:String(a.value).padStart(2,"0")})]},a.label))}),(0,b.jsxs)("div",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden",children:[(0,b.jsxs)("div",{className:"px-6 py-5 border-b border-slate-200 flex items-center justify-between flex-wrap gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-lg font-extrabold text-slate-900",children:"All Contracts"}),(0,b.jsxs)("p",{className:"text-sm text-slate-500 mt-1",children:[B.length," contract",1!==B.length?"s":""]})]}),(0,b.jsx)("div",{className:"flex gap-2 flex-wrap",children:["all","draft","pending","approved","rejected"].map(a=>(0,b.jsx)("button",{onClick:()=>r(a),className:`px-3 py-2 rounded-xl text-xs font-semibold border transition ${q===a?"bg-[#0F141F] text-white border-[#0F141F]":"bg-white text-slate-700 border-slate-200 hover:bg-slate-50"}`,children:"all"===a?"All":a.charAt(0).toUpperCase()+a.slice(1)},a))})]}),(0,b.jsx)("div",{className:"divide-y divide-slate-200",children:m?(0,b.jsx)("div",{className:"py-16 text-center text-slate-500",children:"Loading contracts…"}):o?(0,b.jsx)("div",{className:"py-16 text-center text-rose-600",children:o}):0===B.length?(0,b.jsx)("div",{className:"py-16 text-center text-slate-500",children:"No contracts found"}):B.map(a=>(0,b.jsx)("div",{role:"button",tabIndex:0,onClick:()=>A(String(a.id)),onKeyDown:b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),A(String(a.id)))},className:"w-full text-left px-6 py-5 hover:bg-slate-50 transition cursor-pointer",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"font-semibold text-slate-900 truncate",children:a.title||a.name}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-1 truncate",children:a.id})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 shrink-0",children:[(0,b.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold border ${{approved:"bg-emerald-50 text-emerald-700 border-emerald-200",pending:"bg-amber-50 text-amber-700 border-amber-200",draft:"bg-slate-50 text-slate-700 border-slate-200",rejected:"bg-red-50 text-red-700 border-red-200"}[a.status]||"bg-slate-50 text-slate-700 border-slate-200"}`,children:String(a.status).toUpperCase()}),(0,b.jsx)("span",{className:"text-xs text-slate-500 hidden sm:inline",children:(a=>{let b=a?.updated_at||a?.last_edited_at||a?.created_at;if(!b)return"—";let c=new Date(b);return Number.isNaN(c.getTime())?"—":c.toLocaleString()})(a)}),(0,b.jsx)("button",{type:"button",onClick:b=>{b.preventDefault(),b.stopPropagation(),z(a)},disabled:u===String(a.id),className:"inline-flex items-center justify-center rounded-full bg-white border border-slate-200 text-slate-800 w-9 h-9 hover:bg-slate-50 disabled:opacity-50","aria-label":"Delete contract",title:"Delete",children:(0,b.jsx)(i.Trash2,{className:"w-4 h-4"})}),(0,b.jsx)("span",{className:"text-sm font-semibold text-slate-700",children:"View →"})]})]})},a.id))})]})]})};function k(){return(0,b.jsx)(j,{})}a.s(["default",()=>k],31853)}];

//# sourceMappingURL=_b26ad377._.js.map