{"version":3,"sources":["../../../../app/components/ContractEditorPageV2.tsx","../../../../app/contracts/editor/EditorClient.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport type { Editor } from '@tiptap/react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport DashboardLayout from './DashboardLayout';\nimport RichTextEditor from './RichTextEditor';\nimport { ApiClient, Contract } from '@/app/lib/api-client';\nimport { sanitizeEditorHtml } from '@/app/lib/sanitize-html';\n\ntype TemplateListItem = {\n  filename: string;\n  name: string;\n  description?: string;\n  mine?: boolean;\n};\n\ntype SignerDraft = {\n  email: string;\n  name: string;\n};\n\ntype GenerationContext = {\n  contractId: string;\n  template: string;\n  fieldValues: Record<string, string>;\n  selectedClauseIds: string[];\n  customClauses: Array<{ title?: string; content: string }>;\n  constraints: Array<{ name: string; value: string }>;\n  updatedAt: number;\n  createdAt: number;\n};\n\nconst ContractEditorPageV2: React.FC = () => {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const contractId = searchParams?.get('id') || '';\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [contract, setContract] = useState<Contract | null>(null);\n\n  // Templates\n  const [templatesLoading, setTemplatesLoading] = useState(false);\n  const [templatesError, setTemplatesError] = useState<string | null>(null);\n  const [templates, setTemplates] = useState<TemplateListItem[]>([]);\n  const [templateSearch, setTemplateSearch] = useState('');\n  const [templateApplying, setTemplateApplying] = useState(false);\n\n  const editorApiRef = useRef<Editor | null>(null);\n  const [editorReady, setEditorReady] = useState(false);\n  const [editorInitialized, setEditorInitialized] = useState(false);\n  const [editorHtml, setEditorHtml] = useState('');\n  const [editorText, setEditorText] = useState('');\n  const [dirty, setDirty] = useState(false);\n  const [editTick, setEditTick] = useState(0);\n  const [saving, setSaving] = useState(false);\n  const [saveError, setSaveError] = useState<string | null>(null);\n  const [moreOpen, setMoreOpen] = useState(false);\n\n  // Autosave ordering controls: prevent out-of-order responses from overwriting newer content.\n  const lastLocalEditMsRef = useRef<number>(0);\n  const saveSeqRef = useRef<number>(0);\n  const saveAbortRef = useRef<AbortController | null>(null);\n\n  // Local snapshot: protects against API hiccups and gives \"real-time\" persistence.\n  const snapshotTimerRef = useRef<number | null>(null);\n  const snapshotKey = useMemo(\n    () => (contractId ? `clm:contractEditor:snapshot:v2:${contractId}` : null),\n    [contractId]\n  );\n\n  // E-sign\n  const [signOpen, setSignOpen] = useState(false);\n  const [signers, setSigners] = useState<SignerDraft[]>([{ email: '', name: '' }]);\n  const [signingOrder, setSigningOrder] = useState<'sequential' | 'parallel'>('sequential');\n  const [signing, setSigning] = useState(false);\n  const [signError, setSignError] = useState<string | null>(null);\n  const [signingUrl, setSigningUrl] = useState<string | null>(null);\n  const [signStatusLoading, setSignStatusLoading] = useState(false);\n  const [signStatus, setSignStatus] = useState<any | null>(null);\n\n  const [generationCtx, setGenerationCtx] = useState<GenerationContext | null>(null);\n  const [rehydrating, setRehydrating] = useState(false);\n  const rehydratedOnceRef = useRef(false);\n\n  const unwrapContractLike = (raw: any) => {\n    // Some backend endpoints return { contract: {...} } or { data: {...} }.\n    // Be defensive so we don't accidentally set wrapper objects as the contract.\n    return raw?.contract ?? raw?.data?.contract ?? raw?.data ?? raw;\n  };\n\n  const writeLocalSnapshot = (payload: { html: string; text: string; client_updated_at_ms: number }) => {\n    if (typeof window === 'undefined') return;\n    if (!snapshotKey) return;\n    try {\n      localStorage.setItem(\n        snapshotKey,\n        JSON.stringify({\n          html: payload.html,\n          text: payload.text,\n          client_updated_at_ms: payload.client_updated_at_ms,\n          saved_at_ms: Date.now(),\n        })\n      );\n    } catch {\n      // ignore\n    }\n  };\n\n  const readLocalSnapshot = (): { html: string; text: string; client_updated_at_ms: number } | null => {\n    if (typeof window === 'undefined') return null;\n    if (!snapshotKey) return null;\n    try {\n      const raw = localStorage.getItem(snapshotKey);\n      if (!raw) return null;\n      const obj = JSON.parse(raw);\n      if (!obj || typeof obj !== 'object') return null;\n      const html = typeof (obj as any).html === 'string' ? (obj as any).html : '';\n      const text = typeof (obj as any).text === 'string' ? (obj as any).text : '';\n      const ms = Number((obj as any).client_updated_at_ms || 0);\n      if (!ms || ms < 0) return null;\n      return { html, text, client_updated_at_ms: ms };\n    } catch {\n      return null;\n    }\n  };\n\n  // Persist Add Template panel UI state across reload/logout.\n  useEffect(() => {\n    if (!contractId) return;\n    if (typeof window === 'undefined') return;\n    const key = `clm:contractEditor:addTemplate:v1:${contractId}`;\n    try {\n      const raw = localStorage.getItem(key);\n      if (!raw) return;\n      const obj = JSON.parse(raw);\n      if (obj && typeof obj === 'object') {\n        const search = typeof (obj as any).templateSearch === 'string' ? (obj as any).templateSearch : '';\n        setTemplateSearch(search);\n      }\n    } catch {\n      // ignore\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [contractId]);\n\n  useEffect(() => {\n    if (!contractId) return;\n    if (typeof window === 'undefined') return;\n    const key = `clm:contractEditor:addTemplate:v1:${contractId}`;\n    try {\n      localStorage.setItem(\n        key,\n        JSON.stringify({\n          templateSearch,\n          updatedAt: Date.now(),\n        })\n      );\n    } catch {\n      // ignore\n    }\n  }, [contractId, templateSearch]);\n\n  const escapeHtml = (s: string) =>\n    (s || '')\n      .replaceAll('&', '&amp;')\n      .replaceAll('<', '&lt;')\n      .replaceAll('>', '&gt;')\n      .replaceAll('\"', '&quot;')\n      .replaceAll(\"'\", '&#039;');\n\n  const normalizeMetadata = (value: unknown) => {\n    let md: any = value;\n    if (typeof md === 'string') {\n      try {\n        md = JSON.parse(md);\n      } catch {\n        md = {};\n      }\n    }\n    return md && typeof md === 'object' ? md : {};\n  };\n\n  const isMeaningfullyEmptyHtml = (html: unknown) => {\n    const raw = String(html || '').trim();\n    if (!raw) return true;\n    // Common TipTap/ProseMirror empty-doc forms.\n    const normalized = raw\n      .replace(/\\s+/g, '')\n      .replace(/&nbsp;/g, '')\n      .toLowerCase();\n    const empties = new Set([\n      '<p></p>',\n      '<p><br></p>',\n      '<p><br/></p>',\n      '<p><br/></p><p><br/></p>',\n      '<p></p><p></p>',\n    ]);\n    if (empties.has(normalized)) return true;\n    // If it only contains tags and no text, treat it as empty.\n    const textOnly = normalized.replace(/<[^>]*>/g, '');\n    return textOnly.length === 0;\n  };\n\n  const textToHtml = (text: string) => {\n    const safe = escapeHtml(text || '');\n    // Preserve newlines. Split on double newlines into paragraphs.\n    const paras = safe\n      .split(/\\n{2,}/)\n      .map((p) => p.replace(/\\n/g, '<br/>'))\n      .filter((p) => p.trim().length > 0);\n\n    return paras.length ? paras.map((p) => `<p>${p}</p>`).join('') : '<p></p>';\n  };\n\n  const triggerDownload = (blob: Blob, filename: string) => {\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n    URL.revokeObjectURL(url);\n  };\n\n  useEffect(() => {\n    let alive = true;\n\n    async function load() {\n      if (!contractId) {\n        setLoading(false);\n        setError('Missing contract id');\n        return;\n      }\n      try {\n        setLoading(true);\n        setError(null);\n        const client = new ApiClient();\n        const [res, contentRes] = await Promise.all([\n          client.getContractById(contractId),\n          client.getContractContent(contractId),\n        ]);\n        if (!alive) return;\n\n        if (res.success) {\n          const raw: any = res.data as any;\n          const unwrapped: any = unwrapContractLike(raw);\n          setContract(unwrapped as any);\n\n          // Initialize editor state BEFORE rendering the editor to avoid a mount-with-empty flash.\n          const c = unwrapped as any;\n          const md = normalizeMetadata(c?.metadata);\n\n          const content: any = contentRes?.success ? (contentRes.data as any) : null;\n          const backendClientMs =\n            Number(content?.client_updated_at_ms || md?.editor_client_updated_at_ms || 0) || 0;\n\n          const renderedHtml: string | undefined =\n            content?.rendered_html || c?.rendered_html || md?.rendered_html;\n          const renderedText: string =\n            content?.rendered_text ||\n            c?.rendered_text ||\n            md?.rendered_text ||\n            c?.raw_text ||\n            md?.raw_text ||\n            '';\n\n          const backendHtml = renderedHtml && String(renderedHtml).trim().length > 0 ? String(renderedHtml) : '';\n          const backendText = String(renderedText || '');\n\n          const snap = readLocalSnapshot();\n          const snapIsNewer = !!snap && snap.client_updated_at_ms > backendClientMs;\n          const snapHasContent = !!snap && (!isMeaningfullyEmptyHtml(snap.html) || String(snap.text || '').trim().length > 0);\n\n          const chosenHtml = snapIsNewer && snapHasContent ? snap!.html : backendHtml;\n          const chosenText = snapIsNewer && snapHasContent ? snap!.text : backendText;\n\n          const initialHtml = !isMeaningfullyEmptyHtml(chosenHtml)\n            ? String(chosenHtml)\n            : textToHtml(String(chosenText || ''));\n\n          setEditorHtml(initialHtml || '');\n          setEditorText(String(chosenText || ''));\n          setDirty(false);\n          setSaveError(null);\n          setEditorInitialized(true);\n        } else {\n          setError(res.error || 'Failed to load contract');\n        }\n      } catch (e) {\n        if (!alive) return;\n        setError(e instanceof Error ? e.message : 'Failed to load contract');\n      } finally {\n        if (alive) setLoading(false);\n      }\n    }\n\n    load();\n    return () => {\n      alive = false;\n    };\n  }, [contractId]);\n\n  useEffect(() => {\n    if (!contractId) return;\n    try {\n      const raw = localStorage.getItem(`clm:contractGenerationContext:v1:${contractId}`);\n      if (!raw) {\n        setGenerationCtx(null);\n        return;\n      }\n      const obj = JSON.parse(raw);\n      if (!obj || typeof obj !== 'object') {\n        setGenerationCtx(null);\n        return;\n      }\n      setGenerationCtx({\n        contractId: String((obj as any).contractId || contractId),\n        template: String((obj as any).template || ''),\n        fieldValues: ((obj as any).fieldValues || {}) as Record<string, string>,\n        selectedClauseIds: (Array.isArray((obj as any).selectedClauseIds) ? (obj as any).selectedClauseIds : []) as string[],\n        customClauses: (Array.isArray((obj as any).customClauses) ? (obj as any).customClauses : []) as any,\n        constraints: (Array.isArray((obj as any).constraints) ? (obj as any).constraints : []) as any,\n        updatedAt: Number((obj as any).updatedAt || 0),\n        createdAt: Number((obj as any).createdAt || 0),\n      });\n    } catch {\n      setGenerationCtx(null);\n    }\n  }, [contractId]);\n\n  // Fallback initialization path: only run if the editor wasn't initialized during load().\n  useEffect(() => {\n    if (editorInitialized) return;\n    if (!contractId) return;\n    if (!contract) return;\n    const c = contract as any;\n    const md = normalizeMetadata(c?.metadata);\n\n    const renderedHtml: string | undefined = c?.rendered_html || md?.rendered_html;\n    const renderedText: string = c?.rendered_text || md?.rendered_text || c?.raw_text || md?.raw_text || '';\n    const initialHtml = renderedHtml && String(renderedHtml).trim().length > 0 ? String(renderedHtml) : textToHtml(renderedText);\n\n    setEditorHtml(initialHtml || '');\n    setEditorText(String(renderedText || ''));\n    setDirty(false);\n    setSaveError(null);\n    setEditorInitialized(true);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editorInitialized, contractId, (contract as any)?.id]);\n\n  // If a contract was created from a filesystem template but has empty content, rehydrate content from template + stored inputs.\n  useEffect(() => {\n    if (!contractId) return;\n    if (loading) return;\n    if (!contract) return;\n    if (rehydratedOnceRef.current) return;\n\n    const c: any = contract as any;\n    const md = normalizeMetadata(c?.metadata);\n\n    const existingHtmlRaw = editorApiRef.current?.getHTML?.() ?? editorHtml;\n    const existingText = String(editorApiRef.current?.getText?.() ?? editorText ?? '').trim();\n    if (!isMeaningfullyEmptyHtml(existingHtmlRaw) || !!existingText) {\n      rehydratedOnceRef.current = true;\n      return;\n    }\n\n    const templateFilename = String(\n      md?.template_filename ||\n        md?.template ||\n        c?.template_filename ||\n        // Fallback to generator context (localStorage)\n        generationCtx?.template ||\n        ''\n    ).trim();\n    if (!templateFilename) return;\n\n    const structuredInputs =\n      (c?.form_inputs && typeof c.form_inputs === 'object'\n        ? c.form_inputs\n        : md?.form_inputs && typeof md.form_inputs === 'object'\n          ? md.form_inputs\n          : generationCtx?.fieldValues || {}) || {};\n    const clauseList: any[] = Array.isArray(c?.clauses) ? c.clauses : [];\n\n    const selectedClausesFromContract: string[] = clauseList\n      .filter((x) => x && x.kind === 'library' && typeof x.clause_id === 'string')\n      .map((x) => String(x.clause_id));\n    const constraintsFromContract: Array<{ name: string; value: string }> = clauseList\n      .filter((x) => x && x.kind === 'constraint')\n      .map((x) => ({ name: String(x.name || ''), value: String(x.value || '') }))\n      .filter((x) => x.name.trim() && x.value.trim());\n    const customClausesFromContract: Array<{ title?: string; content: string }> = clauseList\n      .filter((x) => x && x.kind === 'custom')\n      .map((x) => ({ title: String(x.title || 'Custom Clause'), content: String(x.content || '') }))\n      .filter((x) => x.content.trim());\n\n    const selectedClauses = Array.from(\n      new Set([\n        ...selectedClausesFromContract,\n        ...(Array.isArray(generationCtx?.selectedClauseIds) ? generationCtx!.selectedClauseIds.map(String) : []),\n      ])\n    );\n    const constraints = (constraintsFromContract.length\n      ? constraintsFromContract\n      : Array.isArray(generationCtx?.constraints)\n        ? generationCtx!.constraints\n        : []) as Array<{ name: string; value: string }>;\n    const customClauses = (customClausesFromContract.length\n      ? customClausesFromContract\n      : Array.isArray(generationCtx?.customClauses)\n        ? generationCtx!.customClauses\n        : []) as Array<{ title?: string; content: string }>;\n\n    (async () => {\n      try {\n        setRehydrating(true);\n        const client = new ApiClient();\n        const res = await client.previewContractFromFile({\n          filename: templateFilename,\n          structuredInputs,\n          selectedClauses,\n          customClauses,\n          constraints,\n        });\n        if (!res.success) return;\n        const nextText = String((res.data as any)?.rendered_text || '').trim();\n        if (!nextText) return;\n\n        const nextHtml = textToHtml(nextText);\n        editorApiRef.current?.commands.setContent(nextHtml, { emitUpdate: false });\n        setEditorHtml(nextHtml);\n        setEditorText(nextText);\n        setDirty(true);\n        setEditTick((t) => t + 1);\n        await saveNow();\n        rehydratedOnceRef.current = true;\n      } catch {\n        // ignore\n      } finally {\n        setRehydrating(false);\n      }\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [contractId, loading, (contract as any)?.id, generationCtx?.template]);\n\n  useEffect(() => {\n    let alive = true;\n    async function loadTemplates() {\n      try {\n        setTemplatesLoading(true);\n        setTemplatesError(null);\n        const client = new ApiClient();\n\n        const [mineRes, publicRes] = await Promise.all([\n          client.listMyTemplateFiles(),\n          client.listTemplateFiles(),\n        ]);\n        if (!alive) return;\n\n        const mine = (mineRes.success ? (mineRes.data as any)?.results : []) || [];\n        const pub = (publicRes.success ? (publicRes.data as any)?.results : []) || [];\n\n        const merged: TemplateListItem[] = [];\n        const seen = new Set<string>();\n\n        for (const x of mine) {\n          const filename = String(x?.filename || '').trim();\n          if (!filename || seen.has(filename)) continue;\n          seen.add(filename);\n          merged.push({\n            filename,\n            name: String(x?.name || x?.filename || 'Untitled'),\n            description: x?.description ? String(x.description) : undefined,\n            mine: true,\n          });\n        }\n\n        for (const x of pub) {\n          const filename = String(x?.filename || '').trim();\n          if (!filename || seen.has(filename)) continue;\n          seen.add(filename);\n          merged.push({\n            filename,\n            name: String(x?.name || x?.filename || 'Untitled'),\n            description: x?.description ? String(x.description) : undefined,\n            mine: false,\n          });\n        }\n\n        setTemplates(merged);\n      } catch (e) {\n        if (!alive) return;\n        setTemplatesError(e instanceof Error ? e.message : 'Failed to load templates');\n      } finally {\n        if (alive) setTemplatesLoading(false);\n      }\n    }\n\n    loadTemplates();\n    return () => {\n      alive = false;\n    };\n  }, []);\n\n  const title = (contract as any)?.title || (contract as any)?.name || 'Contract';\n  const updatedAt = (contract as any)?.updated_at ? new Date((contract as any).updated_at).toLocaleString() : null;\n\n  const saveNow = async () => {\n    if (!contractId) return;\n    const rawHtml = editorApiRef.current?.getHTML() ?? editorHtml;\n    const rawText = editorApiRef.current?.getText() ?? editorText;\n\n    const html = sanitizeEditorHtml(rawHtml);\n    const text = String(rawText || '');\n\n    // Prevent accidental wipes (e.g. editor briefly initializes empty and autosave fires).\n    if (isMeaningfullyEmptyHtml(html) && text.trim().length === 0) {\n      setSaveError('Refusing to auto-save empty content. Type something or refresh if this was unexpected.');\n      return;\n    }\n\n    // Snapshot a monotonic timestamp for this content.\n    const clientUpdatedAtMs = Math.max(Date.now(), lastLocalEditMsRef.current || 0);\n    const seq = ++saveSeqRef.current;\n\n    // Abort any older in-flight save. (Even if the request reached the server,\n    // the backend also rejects stale client_updated_at_ms writes.)\n    try {\n      saveAbortRef.current?.abort();\n    } catch {\n      // ignore\n    }\n    const controller = new AbortController();\n    saveAbortRef.current = controller;\n\n    try {\n      setSaving(true);\n      setSaveError(null);\n      const client = new ApiClient();\n      const res = await client.updateContractContent(contractId, {\n        rendered_html: html,\n        rendered_text: text,\n        client_updated_at_ms: clientUpdatedAtMs,\n      }, {\n        signal: controller.signal,\n      });\n\n      // Ignore any response from an older save attempt.\n      if (seq !== saveSeqRef.current) return;\n\n      if (res.success) {\n        const next = unwrapContractLike(res.data as any);\n        setContract(next as any);\n\n        // Update local snapshot as a durable client-side fallback.\n        writeLocalSnapshot({ html, text, client_updated_at_ms: clientUpdatedAtMs });\n\n        // Let other pages (e.g. contracts list) refresh instantly.\n        try {\n          window.dispatchEvent(\n            new CustomEvent('contracts:changed', {\n              detail: { id: contractId, updated_at: (next as any)?.updated_at || null },\n            })\n          );\n        } catch {\n          // ignore\n        }\n        // Only clear dirty if nothing newer has been typed since this save snapshot.\n        if ((lastLocalEditMsRef.current || 0) <= clientUpdatedAtMs) {\n          setDirty(false);\n        }\n      } else {\n        setSaveError(res.error || 'Failed to save');\n      }\n    } catch (e) {\n      // AbortError is expected when typing quickly; don't surface as an error.\n      const msg = e instanceof Error ? e.message : 'Failed to save';\n      if (!String(msg).toLowerCase().includes('abort')) {\n        setSaveError(msg);\n      }\n    } finally {\n      // Only clear saving state if this is the latest save.\n      if (seq === saveSeqRef.current) setSaving(false);\n    }\n  };\n\n  const saveIfDirty = async () => {\n    if (!dirty) return;\n    // Fire-and-forget is OK; saveNow handles aborting older saves.\n    await saveNow();\n  };\n\n  // Flush changes when tab is backgrounded (user refreshes/closes/navigates).\n  useEffect(() => {\n    const onVis = () => {\n      if (document.visibilityState !== 'visible') {\n        void saveIfDirty();\n      }\n    };\n    document.addEventListener('visibilitychange', onVis);\n    return () => document.removeEventListener('visibilitychange', onVis);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dirty, contractId]);\n\n  // Auto-save with a small debounce.\n  useEffect(() => {\n    if (!editorReady) return;\n    if (!dirty) return;\n    if (!editorInitialized) return;\n    const t = window.setTimeout(() => {\n      saveNow();\n    }, 900);\n    return () => window.clearTimeout(t);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editTick, dirty, editorReady, contractId]);\n\n  const applyTemplateToEditor = async (filename: string) => {\n    const ed = editorApiRef.current;\n    if (!ed) return;\n    try {\n      setTemplateApplying(true);\n      setTemplatesError(null);\n      const client = new ApiClient();\n      const res = await client.getTemplateFileContent(filename);\n      if (!res.success) {\n        setTemplatesError(res.error || 'Failed to load template content');\n        return;\n      }\n\n      const content = String((res.data as any)?.content || '');\n      const nextHtml = textToHtml(content);\n\n      ed.commands.setContent(nextHtml, { emitUpdate: false });\n      setEditorHtml(nextHtml);\n      setEditorText(content);\n\n      setDirty(true);\n      setEditTick((t) => t + 1);\n      await saveNow();\n    } catch (e) {\n      setTemplatesError(e instanceof Error ? e.message : 'Failed to apply template');\n    } finally {\n      setTemplateApplying(false);\n    }\n  };\n\n  const openSigningModal = () => {\n    setSignError(null);\n    setSigningUrl(null);\n    setSignStatus(null);\n    setSignOpen(true);\n  };\n\n  const validateSigningUrl = (url: string) => {\n    const u = (url || '').trim();\n    if (!u) return 'Signing URL is missing';\n\n    if (u.startsWith('/')) return null;\n    if (/^https?:\\/\\//i.test(u)) return null;\n    return 'Signing URL is invalid.';\n  };\n\n  const refreshSigningStatus = async () => {\n    if (!contractId) return;\n    try {\n      setSignStatusLoading(true);\n      setSignError(null);\n      const client = new ApiClient();\n      const res = await client.inhouseStatus(contractId);\n      if (!res.success) {\n        const msg = res.error || 'Failed to fetch status';\n        setSignError(msg);\n        return;\n      }\n      setSignStatus(res.data as any);\n    } catch (e) {\n      const msg = e instanceof Error ? e.message : 'Failed to fetch status';\n      setSignError(msg);\n    } finally {\n      setSignStatusLoading(false);\n    }\n  };\n\n  const startSigning = async () => {\n    if (!contractId) return;\n    const cleaned = signers\n      .map((s) => ({ email: s.email.trim(), name: s.name.trim() }))\n      .filter((s) => s.email && s.name);\n    if (cleaned.length === 0) {\n      setSignError('Add at least one signer (name + email)');\n      return;\n    }\n    try {\n      setSigning(true);\n      setSignError(null);\n      const client = new ApiClient();\n\n      const res = await client.inhouseStart({\n        contract_id: contractId,\n        signers: cleaned,\n        signing_order: signingOrder,\n      });\n      if (!res.success) {\n        setSignError(res.error || 'Failed to start signing');\n        return;\n      }\n\n      const url = String((res.data as any)?.signing_url || '');\n      const urlErr = validateSigningUrl(url);\n      if (urlErr) {\n        setSignError(urlErr);\n        setSigningUrl(null);\n        return;\n      }\n\n      setSigningUrl(url);\n      window.open(url, '_blank', 'noopener,noreferrer');\n\n      setSignOpen(false);\n      router.push(`/contracts/signing-status?id=${encodeURIComponent(contractId)}`);\n      return;\n    } catch (e) {\n      setSignError(e instanceof Error ? e.message : 'Failed to start signing');\n    } finally {\n      setSigning(false);\n    }\n  };\n\n  const downloadExecuted = async () => {\n    if (!contractId) return;\n    const statusVal = String((signStatus as any)?.status || '').toLowerCase();\n    const allSigned = Boolean((signStatus as any)?.all_signed);\n    const completed = statusVal === 'completed' || statusVal === 'executed';\n    if (!completed || !allSigned) {\n      setSignError('Signing is not completed yet.');\n      return;\n    }\n    const client = new ApiClient();\n    const res = await client.inhouseDownloadExecutedPdf(contractId);\n    if (res.success && res.data) {\n      triggerDownload(res.data, `${title.replace(/\\s+/g, '_')}_signed.pdf`);\n    } else {\n      setSignError(res.error || 'Failed to download signed PDF');\n    }\n  };\n\n  const downloadPdf = async () => {\n    if (!contractId) return;\n    const client = new ApiClient();\n    const res = await client.downloadContractPdf(contractId);\n    if (res.success && res.data) {\n      triggerDownload(res.data, `${title.replace(/\\s+/g, '_')}.pdf`);\n    } else {\n      setError(res.error || 'Failed to download PDF');\n    }\n  };\n\n  const downloadTxt = async () => {\n    if (!contractId) return;\n    const client = new ApiClient();\n    const res = await client.downloadContractTxt(contractId);\n    if (res.success && res.data) {\n      triggerDownload(res.data, `${title.replace(/\\s+/g, '_')}.txt`);\n    } else {\n      setError(res.error || 'Failed to download TXT');\n    }\n  };\n\n  const deleteContract = async () => {\n    if (!contractId) return;\n    const ok = window.confirm('Delete this contract? This cannot be undone.');\n    if (!ok) return;\n    try {\n      setSaving(true);\n      setSaveError(null);\n      const client = new ApiClient();\n      const res = await client.deleteContract(contractId);\n      if (!res.success) {\n        setSaveError(res.error || 'Failed to delete contract');\n        return;\n      }\n      router.push('/contracts');\n    } catch (e) {\n      setSaveError(e instanceof Error ? e.message : 'Failed to delete contract');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const filteredTemplates = useMemo(() => {\n    const q = templateSearch.trim().toLowerCase();\n    if (!q) return templates;\n    return templates.filter((t) => {\n      const hay = `${t.filename} ${t.name} ${t.description || ''}`.toLowerCase();\n      return hay.includes(q);\n    });\n  }, [templates, templateSearch]);\n\n  return (\n    <DashboardLayout>\n      <div className=\"bg-[#F2F0EB]\">\n        {/* Header */}\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6\">\n          <div className=\"flex items-center gap-3 sm:gap-4 min-w-0\">\n            <button\n              onClick={async () => {\n                try {\n                  await saveIfDirty();\n                } finally {\n                  router.back();\n                }\n              }}\n              className=\"w-10 h-10 rounded-full bg-white border border-black/10 shadow-sm grid place-items-center text-black/45 hover:text-black\"\n              aria-label=\"Back\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n\n            <div className=\"min-w-0\">\n              <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 min-w-0\">\n                <h1 className=\"text-xl md:text-2xl font-bold text-[#111827] truncate\">{title}</h1>\n                {updatedAt && (\n                  <div className=\"flex items-center gap-2 flex-shrink-0\">\n                    <span className=\"w-2 h-2 rounded-full bg-emerald-500\" />\n                    <span className=\"text-xs text-black/45 font-medium\">\n                      {saving ? 'Saving…' : dirty ? 'Unsaved changes' : `Updated ${updatedAt}`}\n                    </span>\n                  </div>\n                )}\n              </div>\n              <p className=\"text-xs text-black/40 mt-1 truncate\">Contract ID: {String(contractId || '')}</p>\n              {saveError && <p className=\"text-xs text-rose-600 mt-1\">{saveError}</p>}\n            </div>\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-2xl\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-12 gap-6\">\n          {/* Editor */}\n          <section className=\"col-span-12 lg:col-span-8 bg-white rounded-[28px] border border-black/5 shadow-sm overflow-hidden\">\n            <div className=\"px-4 sm:px-6 pt-5 pb-4 border-b border-black/5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n              <div className=\"text-sm font-semibold text-[#111827]\">Editor</div>\n              <div className=\"w-full sm:w-auto\">\n                <div className=\"grid grid-cols-3 gap-2 sm:flex sm:flex-wrap sm:items-center sm:gap-2 relative justify-start sm:justify-end\">\n                <button\n                  onClick={openSigningModal}\n                  className=\"col-span-1 h-9 sm:h-10 px-3 sm:px-4 rounded-full bg-white border border-black/10 text-[#0F141F] text-xs sm:text-sm font-semibold hover:bg-black/5\"\n                  type=\"button\"\n                >\n                  <span className=\"hidden sm:inline\">Send for signature</span>\n                  <span className=\"sm:hidden\">Send</span>\n                </button>\n                <button\n                  onClick={downloadPdf}\n                  className=\"col-span-1 h-9 sm:h-10 px-3 sm:px-4 rounded-full bg-[#0F141F] text-white text-xs sm:text-sm font-semibold\"\n                  type=\"button\"\n                >\n                  <span className=\"hidden sm:inline\">Download</span>\n                  <span className=\"sm:hidden\">PDF</span>\n                </button>\n                <button\n                  onClick={() => setMoreOpen((v) => !v)}\n                  className=\"col-span-1 w-9 h-9 sm:w-10 sm:h-10 rounded-full hover:bg-black/5 text-black/45 justify-self-end\"\n                  aria-label=\"More\"\n                  type=\"button\"\n                >\n                  <svg className=\"w-6 h-6 mx-auto\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\" />\n                  </svg>\n                </button>\n\n                {moreOpen && (\n                  <div className=\"absolute right-0 top-12 w-48 bg-white rounded-2xl border border-black/10 shadow-lg overflow-hidden z-20\">\n                    <button\n                      onClick={() => {\n                        setMoreOpen(false);\n                        downloadPdf();\n                      }}\n                      className=\"w-full text-left px-4 py-3 text-sm hover:bg-black/5\"\n                      type=\"button\"\n                    >\n                      Download PDF\n                    </button>\n                    <button\n                      onClick={() => {\n                        setMoreOpen(false);\n                        downloadTxt();\n                      }}\n                      className=\"w-full text-left px-4 py-3 text-sm hover:bg-black/5\"\n                      type=\"button\"\n                    >\n                      Download TXT\n                    </button>\n                    <button\n                      onClick={() => {\n                        setMoreOpen(false);\n                        saveNow();\n                      }}\n                      className=\"w-full text-left px-4 py-3 text-sm hover:bg-black/5\"\n                      type=\"button\"\n                    >\n                      Save now\n                    </button>\n                    <div className=\"h-px bg-black/5\" />\n\n                    <button\n                      onClick={() => {\n                        setMoreOpen(false);\n                        deleteContract();\n                      }}\n                      className=\"w-full text-left px-4 py-3 text-sm text-rose-600 hover:bg-rose-50\"\n                      type=\"button\"\n                    >\n                      Delete contract\n                    </button>\n                  </div>\n                )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"px-4 sm:px-6 py-5 sm:py-6 overflow-y-auto\" style={{ maxHeight: 'calc(100vh - 260px)' }}>\n              {loading ? (\n                <div className=\"text-sm text-black/45\">Loading contract…</div>\n              ) : !contract ? (\n                <div className=\"text-sm text-black/45\">No contract found.</div>\n              ) : rehydrating ? (\n                <div className=\"text-sm text-black/45\">Restoring template content…</div>\n              ) : (\n                <RichTextEditor\n                  valueHtml={editorHtml}\n                  disabled={false}\n                  onEditorReady={(ed) => {\n                    editorApiRef.current = ed;\n                    setEditorReady(!!ed);\n                  }}\n                  onChange={(html, text) => {\n                    setEditorHtml(html);\n                    setEditorText(text);\n                    const now = Date.now();\n                    lastLocalEditMsRef.current = now;\n                    setDirty(true);\n                    setEditTick((t) => t + 1);\n\n                    // Throttled local snapshot write.\n                    if (snapshotTimerRef.current) {\n                      window.clearTimeout(snapshotTimerRef.current);\n                    }\n                    snapshotTimerRef.current = window.setTimeout(() => {\n                      writeLocalSnapshot({ html, text, client_updated_at_ms: now });\n                    }, 250);\n                  }}\n                  editorClassName=\"min-h-[60vh] rounded-2xl border border-black/10 bg-white px-5 py-4 text-[13px] leading-6 text-slate-900 font-serif outline-none\"\n                />\n              )}\n            </div>\n          </section>\n\n          {/* Right Panel */}\n          <aside className=\"col-span-12 lg:col-span-4 space-y-6\">\n            <div className=\"bg-white rounded-[28px] border border-black/5 shadow-sm overflow-hidden\">\n              <div className=\"px-4 sm:px-6 pt-6 pb-4 border-b border-black/5\">\n                <p className=\"text-sm font-semibold text-[#111827]\">Add Template</p>\n                <p className=\"text-xs text-black/45 mt-1\">Insert a template into the editor, then edit manually.</p>\n              </div>\n              <div className=\"p-4 sm:p-5\">\n                <div className=\"flex items-center gap-2 bg-[#F6F3ED] rounded-full px-4 py-2\">\n                  <svg className=\"w-4 h-4 text-black/35\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                  </svg>\n                  <input\n                    className=\"bg-transparent outline-none text-sm w-full\"\n                    placeholder=\"Search templates…\"\n                    value={templateSearch}\n                    onChange={(e) => setTemplateSearch(e.target.value)}\n                  />\n                </div>\n\n                <div className=\"mt-3\">\n                  <div className=\"text-xs text-black/45 font-semibold\">Applying a template replaces the editor content.</div>\n                </div>\n\n                {templatesError && <div className=\"text-xs text-rose-600 mt-3\">{templatesError}</div>}\n\n                <div className=\"mt-4 space-y-3 max-h-[38vh] overflow-y-auto pr-1\">\n                  {templatesLoading ? (\n                    <div className=\"text-sm text-black/45\">Loading templates…</div>\n                  ) : filteredTemplates.length === 0 ? (\n                    <div className=\"text-sm text-black/45\">No templates found.</div>\n                  ) : (\n                    filteredTemplates.map((t) => (\n                      <div key={t.filename} className=\"rounded-2xl border border-black/5 bg-[#F6F3ED] p-4\">\n                        <div className=\"flex items-start justify-between gap-3\">\n                          <div className=\"min-w-0\">\n                            <p className=\"text-sm font-semibold text-[#111827] truncate\">{t.name}</p>\n                            <p className=\"text-[11px] text-black/45 mt-1 truncate\">{t.filename}</p>\n                            {t.mine ? <p className=\"text-[10px] mt-1 font-bold tracking-wider text-[#FF5C7A]\">MY TEMPLATE</p> : null}\n                          </div>\n                          <button\n                            type=\"button\"\n                            onClick={() => applyTemplateToEditor(t.filename)}\n                            disabled={templateApplying}\n                            className=\"h-9 px-3 rounded-full bg-white border border-black/10 text-sm font-semibold text-[#0F141F] hover:bg-black/5 disabled:opacity-60\"\n                          >\n                            Add\n                          </button>\n                        </div>\n                        {t.description ? <p className=\"text-xs text-black/45 mt-2 line-clamp-2\">{t.description}</p> : null}\n                      </div>\n                    ))\n                  )}\n                </div>\n\n              </div>\n            </div>\n          </aside>\n        </div>\n\n        {signOpen && (\n          <div className=\"fixed inset-0 z-50 bg-black/40 flex items-center justify-center p-4\" role=\"dialog\" aria-modal=\"true\">\n            <div className=\"w-full max-w-xl bg-white rounded-[28px] border border-black/10 shadow-2xl overflow-hidden\">\n              <div className=\"px-6 pt-6 pb-4 border-b border-black/5 flex items-start justify-between gap-3\">\n                <div>\n                  <p className=\"text-lg font-bold text-[#111827]\">Sign Now</p>\n                  <p className=\"text-xs text-black/45 mt-1\">Invite signers and open the signing link.</p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => setSignOpen(false)}\n                  className=\"w-10 h-10 rounded-full hover:bg-black/5 text-black/45\"\n                  aria-label=\"Close\"\n                >\n                  <svg className=\"w-6 h-6 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n\n              <div className=\"p-6 space-y-5\">\n                <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                  <div>\n                    <div className=\"text-sm font-semibold text-[#111827]\">Signing order</div>\n                    <div className=\"text-xs text-black/45 mt-1\">Sequential = one-by-one. Parallel = invite all at once.</div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setSigningOrder('sequential')}\n                      className={`h-9 px-3 rounded-full border text-sm font-semibold ${\n                        signingOrder === 'sequential'\n                          ? 'bg-white border-black/30 text-[#0F141F]'\n                          : 'bg-white border-black/10 text-black/60 hover:bg-black/5'\n                      }`}\n                    >\n                      Sequential\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setSigningOrder('parallel')}\n                      className={`h-9 px-3 rounded-full border text-sm font-semibold ${\n                        signingOrder === 'parallel'\n                          ? 'bg-white border-black/30 text-[#0F141F]'\n                          : 'bg-white border-black/10 text-black/60 hover:bg-black/5'\n                      }`}\n                    >\n                      Parallel\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center justify-between gap-3\">\n                  <div className=\"text-sm font-semibold text-[#111827]\">Signers</div>\n                  <button\n                    type=\"button\"\n                    onClick={() => setSigners((prev) => [...prev, { email: '', name: '' }])}\n                    className=\"h-9 px-3 rounded-full bg-white border border-black/10 text-sm font-semibold text-[#0F141F] hover:bg-black/5\"\n                  >\n                    + Add signer\n                  </button>\n                </div>\n\n                <div className=\"space-y-3\">\n                  {signers.map((s, idx) => (\n                    <div key={idx} className=\"grid grid-cols-12 gap-2 items-center\">\n                      <input\n                        className=\"col-span-5 h-10 rounded-2xl bg-white border border-black/10 px-4 text-sm outline-none\"\n                        placeholder=\"Name\"\n                        value={s.name}\n                        onChange={(e) =>\n                          setSigners((prev) => prev.map((x, i) => (i === idx ? { ...x, name: e.target.value } : x)))\n                        }\n                      />\n                      <input\n                        className=\"col-span-6 h-10 rounded-2xl bg-white border border-black/10 px-4 text-sm outline-none\"\n                        placeholder=\"Email\"\n                        value={s.email}\n                        onChange={(e) =>\n                          setSigners((prev) => prev.map((x, i) => (i === idx ? { ...x, email: e.target.value } : x)))\n                        }\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => setSigners((prev) => prev.filter((_, i) => i !== idx))}\n                        disabled={signers.length <= 1}\n                        className=\"col-span-1 w-10 h-10 rounded-full hover:bg-rose-50 text-rose-600 disabled:opacity-40\"\n                        aria-label=\"Remove signer\"\n                      >\n                        <svg className=\"w-5 h-5 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m2 0H7m2 0V5a2 2 0 012-2h2a2 2 0 012 2v2\" />\n                        </svg>\n                      </button>\n                    </div>\n                  ))}\n                </div>\n\n                {signError && <div className=\"text-xs text-rose-600\">{signError}</div>}\n\n                {signingUrl ? (\n                  <div className=\"rounded-2xl border border-black/10 bg-[#F6F3ED] p-4\">\n                    <div className=\"text-xs text-black/45 font-semibold\">Signing link</div>\n                    <div className=\"mt-1 break-all text-sm text-[#111827]\">{signingUrl}</div>\n                  </div>\n                ) : null}\n\n                {signStatus ? (\n                  <div className=\"rounded-2xl border border-black/10 bg-white p-4\">\n                    <div className=\"flex items-center justify-between gap-3\">\n                      <div>\n                        <div className=\"text-xs text-black/45 font-semibold\">Status</div>\n                        <div className=\"text-sm font-semibold text-[#111827]\">{String((signStatus as any)?.status || 'unknown')}</div>\n                      </div>\n                      <button\n                        type=\"button\"\n                        onClick={downloadExecuted}\n                        disabled={(() => {\n                          const statusVal = String((signStatus as any)?.status || '').toLowerCase();\n                          const allSigned = Boolean((signStatus as any)?.all_signed);\n                          const completed = statusVal === 'completed' || statusVal === 'executed';\n                          return !completed || !allSigned;\n                        })()}\n                        className=\"h-9 px-3 rounded-full bg-[#0F141F] text-white text-sm font-semibold\"\n                      >\n                        Download signed PDF\n                      </button>\n                    </div>\n\n                    {(signStatus as any)?.signers?.length ? (\n                      <div className=\"mt-3 space-y-2\">\n                        {(signStatus as any).signers.map((s: any) => (\n                          <div key={String(s.email)} className=\"flex items-center justify-between text-xs\">\n                            <div className=\"text-black/70 truncate\">{String(s.name || s.email)}</div>\n                            {(() => {\n                              const raw = String(s.status || '').trim();\n                              const lower = raw.toLowerCase();\n                              const signedAt = s.signed_at ? String(s.signed_at) : '';\n\n                              const isDeclined = ['declined', 'rejected', 'canceled', 'cancelled', 'refused'].includes(lower);\n                              const isSigned = ['signed', 'completed', 'executed', 'done'].includes(lower) || Boolean(s.has_signed);\n                              const isPending = ['sent', 'invited', 'pending', 'in_progress', 'in progress', 'viewed'].includes(lower);\n\n                              const label = raw || (isSigned ? 'signed' : isDeclined ? 'declined' : isPending ? 'pending' : 'unknown');\n                              const badgeClass = isDeclined\n                                ? 'bg-rose-50 text-rose-700 border-rose-200'\n                                : isSigned\n                                  ? 'bg-emerald-50 text-emerald-700 border-emerald-200'\n                                  : isPending\n                                    ? 'bg-amber-50 text-amber-800 border-amber-200'\n                                    : 'bg-slate-50 text-slate-700 border-slate-200';\n\n                              return (\n                                <div className=\"flex items-center gap-2 flex-shrink-0\">\n                                  <span className={`px-2 py-1 rounded-full border text-[11px] font-semibold ${badgeClass}`}>{label}</span>\n                                  {signedAt ? <span className=\"text-[11px] text-black/40\">{signedAt}</span> : null}\n                                </div>\n                              );\n                            })()}\n                          </div>\n                        ))}\n\n                        {(() => {\n                          const signersArr = Array.isArray((signStatus as any)?.signers) ? (signStatus as any).signers : [];\n                          const anyDeclined = signersArr.some((x: any) => {\n                            const s = String(x?.status || '').toLowerCase();\n                            return ['declined', 'rejected', 'canceled', 'cancelled', 'refused'].includes(s);\n                          });\n                          return anyDeclined ? (\n                            <div className=\"mt-2 text-[11px] text-rose-700\">\n                              One or more signers declined. Start signing again after updating recipients or document.\n                            </div>\n                          ) : null;\n                        })()}\n                      </div>\n                    ) : null}\n                  </div>\n                ) : null}\n\n                <div className=\"flex items-center justify-end gap-2\">\n                  <button\n                    type=\"button\"\n                    onClick={refreshSigningStatus}\n                    disabled={signStatusLoading}\n                    className=\"h-10 px-4 rounded-full bg-white border border-black/10 text-black/70 text-sm font-semibold hover:bg-black/5 disabled:opacity-60\"\n                  >\n                    {signStatusLoading ? 'Checking…' : 'Check status'}\n                  </button>\n\n                  <button\n                    type=\"button\"\n                    onClick={startSigning}\n                    disabled={signing}\n                    className=\"h-10 px-4 rounded-full bg-[#FF5C7A] text-white text-sm font-semibold disabled:opacity-60\"\n                  >\n                    {signing ? 'Starting…' : 'Start signing'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  );\n};\n\nexport default ContractEditorPageV2;\n","'use client';\n\nimport ContractEditorPageV2 from '@/app/components/ContractEditorPageV2';\n\nexport default function EditorClient() {\n  return <ContractEditorPageV2 />;\n}\n"],"names":[],"mappings":"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"}