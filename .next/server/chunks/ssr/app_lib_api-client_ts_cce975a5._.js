module.exports=[98448,a=>{"use strict";var b=a.i(81708);class c{baseUrl;token=null;refreshToken=null;static API_V1_PREFIX="/api/v1";constructor(a=b.API_BASE_URL){this.baseUrl=String(a||b.API_BASE_URL).trim().replace(/\/+$/,""),this.loadTokens()}loadTokens(){}setTokens(a,b){this.token=a}clearTokens(){this.token=null,this.refreshToken=null}async refreshAccessToken(){if(this.loadTokens(),!this.refreshToken)return!1;try{let a=await fetch(`${this.baseUrl}/api/auth/refresh/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({refresh:this.refreshToken})}),b=await a.json().catch(()=>({}));if(!a.ok)return!1;let c=b?.access,d=b?.refresh;if(c)return this.setTokens(c,d),!0;return!1}catch{return!1}}async request(a,b,c,d,e=!0,f){try{this.loadTokens();let g={"Content-Type":"application/json",...d},h=f?.auth!==!1;h&&this.token&&(g.Authorization=`Bearer ${this.token}`);let i={method:a,headers:g,credentials:"include"};f?.signal&&(i.signal=f.signal),c&&("POST"===a||"PUT"===a||"PATCH"===a)&&(i.body=JSON.stringify(c));let j=await fetch(`${this.baseUrl}${b}`,i);if(401===j.status){if(h&&e&&await this.refreshAccessToken())return this.request(a,b,c,d,!1,f);return h&&this.clearTokens(),{success:!1,error:"Unauthorized - Please log in again",status:401}}let k=await j.json().catch(()=>({}));if(!j.ok)return{success:!1,error:k.error||k.message||k.detail||k.details||"Request failed",status:j.status};return{success:!0,data:k,status:j.status}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error",status:0}}}async multipartRequest(a,b,c,d=!0){try{this.loadTokens();let e={};this.token&&(e.Authorization=`Bearer ${this.token}`);let f=await fetch(`${this.baseUrl}${b}`,{method:a,headers:e,credentials:"include",body:c});if(401===f.status){if(d&&await this.refreshAccessToken())return this.multipartRequest(a,b,c,!1);return{success:!1,error:"Unauthorized - Please log in again",status:401}}let g=await f.json().catch(()=>({}));if(!f.ok)return{success:!1,error:g?.message||g?.detail||"Request failed",status:f.status};return{success:!0,data:g,status:f.status}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error",status:0}}}async multipartRequestWithProgress(a,b,c,d){this.loadTokens();let e=`${this.baseUrl}${b}`;return new Promise(b=>{try{let f=new XMLHttpRequest;f.open(a,e,!0),f.withCredentials=!0,this.token&&f.setRequestHeader("Authorization",`Bearer ${this.token}`),f.upload&&d?.onProgress&&(f.upload.onprogress=a=>{let b=a.lengthComputable?a.total:void 0,c=b?Math.round(a.loaded/b*100):void 0;d.onProgress?.({loaded:a.loaded,total:b,percent:c})}),f.onerror=()=>{b({success:!1,error:"Network error",status:0})},f.onload=()=>{let a=f.status,c=f.responseText,d={};try{d=c?JSON.parse(c):{}}catch{d={}}401===a?b({success:!1,error:"Unauthorized - Please log in again",status:401}):a<200||a>=300?b({success:!1,error:d?.message||d?.detail||"Request failed",status:a}):b({success:!0,data:d,status:a})},f.send(c)}catch(a){b({success:!1,error:a instanceof Error?a.message:"Unknown error",status:0})}})}async blobRequest(a,b=!0,c){try{this.loadTokens();let d={},e=c?.auth!==!1;e&&this.token&&(d.Authorization=`Bearer ${this.token}`);let f=await fetch(`${this.baseUrl}${a}`,{method:"GET",headers:d,credentials:"include"});if(401===f.status){if(e&&b&&await this.refreshAccessToken())return this.blobRequest(a,!1,c);return{success:!1,error:"Unauthorized - Please log in again",status:401}}if(!f.ok)return{success:!1,error:"Request failed",status:f.status};let g=await f.blob();return{success:!0,data:g,status:f.status}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error",status:0}}}async register(a,b,c){let d=await this.request("POST","/api/auth/register/",{email:a,password:b,full_name:c});return d.success&&d.data?.access&&this.setTokens(d.data.access,d.data.refresh),d}async login(a,b){let c=await this.request("POST","/api/auth/login/",{email:a,password:b});return c.success&&c.data?.access&&this.setTokens(c.data.access,c.data.refresh),c}async logout(){let a=await this.request("POST","/api/auth/logout/",{});return this.clearTokens(),a}async getCurrentUser(){return this.request("GET","/api/auth/me/")}async getAdminMe(){return this.request("GET",`${c.API_V1_PREFIX}/admin/me/`)}async getAdminAnalytics(){return this.request("GET",`${c.API_V1_PREFIX}/admin/analytics/`)}async getAdminActivity(a){let b=a?.limit??50,d=b?`?${new URLSearchParams({limit:String(b)}).toString()}`:"";return this.request("GET",`${c.API_V1_PREFIX}/admin/activity/${d}`)}async adminListUsers(a){let b={};a?.q&&(b.q=a.q),a?.allTenants&&(b.all_tenants="1");let d=Object.keys(b).length?`?${new URLSearchParams(b).toString()}`:"";return this.request("GET",`${c.API_V1_PREFIX}/admin/users/${d}`)}async adminPromoteUser(a){let b=a.allTenants?"?all_tenants=1":"",{allTenants:d,...e}=a;return this.request("POST",`${c.API_V1_PREFIX}/admin/users/promote/${b}`,e)}async adminDemoteUser(a){let b=a.allTenants?"?all_tenants=1":"",{allTenants:d,...e}=a;return this.request("POST",`${c.API_V1_PREFIX}/admin/users/demote/${b}`,e)}async getAdminFeatureUsage(){return this.request("GET",`${c.API_V1_PREFIX}/admin/feature-usage/`)}async getAdminUserRegistration(){return this.request("GET",`${c.API_V1_PREFIX}/admin/user-registration/`)}async getAdminUserFeatureUsage(){return this.request("GET",`${c.API_V1_PREFIX}/admin/user-feature-usage/`)}async getDashboardInsights(){return this.request("GET",`${c.API_V1_PREFIX}/dashboard/insights/`)}async createContract(a){return this.request("POST",`${c.API_V1_PREFIX}/contracts/`,a)}async generateContract(a){return this.request("POST",`${c.API_V1_PREFIX}/contracts/generate/`,{template_id:a.templateId,structured_inputs:a.structuredInputs||{},user_instructions:a.userInstructions,title:a.title,selected_clauses:a.selectedClauses||[]})}async generateContractFromFile(a){return this.request("POST",`${c.API_V1_PREFIX}/contracts/generate-from-file/`,{filename:a.filename,structured_inputs:a.structuredInputs||{},user_instructions:a.userInstructions,title:a.title,selected_clauses:a.selectedClauses||[],custom_clauses:a.customClauses||[],constraints:a.constraints||[]})}async getContracts(a){let b=a?"?"+new URLSearchParams(a).toString():"";return this.request("GET",`${c.API_V1_PREFIX}/contracts/${b}`)}async getContractById(a){return this.request("GET",`${c.API_V1_PREFIX}/contracts/${a}/`)}async getContractContent(a){return this.request("GET",`${c.API_V1_PREFIX}/contracts/${a}/content/`)}async updateContract(a,b){return this.request("PUT",`${c.API_V1_PREFIX}/contracts/${a}/`,b)}async updateContractContent(a,b,d){return this.request("PATCH",`${c.API_V1_PREFIX}/contracts/${a}/content/`,b,void 0,!0,{signal:d?.signal})}async streamContractAiGenerate(a,b,d){if(this.loadTokens(),!this.token)return void d.onError?.("Not authenticated");let e=async()=>fetch(`${this.baseUrl}${c.API_V1_PREFIX}/contracts/${a}/ai/generate-stream/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},credentials:"include",body:JSON.stringify(b),signal:d.signal}),f=await e();if(401===f.status&&await this.refreshAccessToken()&&(f=await e()),!f.ok||!f.body){let a=await f.text().catch(()=>"");d.onError?.(a||`Request failed (${f.status})`);return}let g=f.body.getReader(),h=new TextDecoder,i="",j=a=>{let b=a.split(/\r?\n/),c="message",e=[];for(let a of b)a.startsWith("event:")&&(c=a.slice(6).trim()),a.startsWith("data:")&&e.push(a.slice(5).trim());let f=e.join("\n");if(f){if("delta"===c){try{let a=JSON.parse(f),b=String(a?.delta||"");b&&d.onDelta(b)}catch{d.onDelta(f)}return}if("done"===c)return void d.onDone?.();if("context"===c){try{let a=JSON.parse(f);d.onContext?.(a)}catch{}return}if("citations"===c){try{let a=JSON.parse(f);d.onCitations?.(a)}catch{}return}if("error"===c)try{let a=JSON.parse(f);d.onError?.(String(a?.error||"Unknown error"))}catch{d.onError?.(f)}}};for(;;){let{value:a,done:b}=await g.read();if(b)break;for(i+=h.decode(a,{stream:!0});;){let a=i.indexOf("\n\n");if(-1===a)break;let b=i.slice(0,a);i=i.slice(a+2),b.trim()&&j(b)}}i.trim()&&j(i)}async streamTemplateAiGenerate(a,b){if(this.loadTokens(),!this.token)return void b.onError?.("Not authenticated");let d=async()=>fetch(`${this.baseUrl}${c.API_V1_PREFIX}/ai/generate/template-stream/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},credentials:"include",body:JSON.stringify(a),signal:b.signal}),e=await d();if(401===e.status&&await this.refreshAccessToken()&&(e=await d()),!e.ok||!e.body){let a=await e.text().catch(()=>"");b.onError?.(a||`Request failed (${e.status})`);return}let f=e.body.getReader(),g=new TextDecoder,h="",i=a=>{let c=a.split(/\r?\n/),d="message",e=[];for(let a of c)a.startsWith("event:")&&(d=a.slice(6).trim()),a.startsWith("data:")&&e.push(a.slice(5).trim());let f=e.join("\n");if(f){if("delta"===d){try{let a=JSON.parse(f),c=String(a?.delta||"");c&&b.onDelta(c)}catch{b.onDelta(f)}return}if("done"===d)return void b.onDone?.();if("context"===d){try{let a=JSON.parse(f);b.onContext?.(a)}catch{}return}if("citations"===d){try{let a=JSON.parse(f);b.onCitations?.(a)}catch{}return}if("error"===d)try{let a=JSON.parse(f);b.onError?.(String(a?.error||"Unknown error"))}catch{b.onError?.(f)}}};for(;;){let{value:a,done:b}=await f.read();if(b)break;for(h+=g.decode(a,{stream:!0});;){let a=h.indexOf("\n\n");if(-1===a)break;let b=h.slice(0,a);h=h.slice(a+2),b.trim()&&i(b)}}h.trim()&&i(h)}async createContractFromContent(a){return this.request("POST",`${c.API_V1_PREFIX}/contracts/create-from-content/`,{title:a.title,contract_type:a.contract_type,rendered_text:a.rendered_text,rendered_html:a.rendered_html,metadata:a.metadata})}async downloadContractTxt(a){return this.blobRequest(`${c.API_V1_PREFIX}/contracts/${a}/download-txt/`)}async downloadContractPdf(a){return this.blobRequest(`${c.API_V1_PREFIX}/contracts/${a}/download-pdf/`)}async inhouseStart(a){return this.request("POST",`${c.API_V1_PREFIX}/inhouse/esign/start/`,{contract_id:a.contract_id,signers:a.signers,signing_order:a.signing_order||"sequential",expires_in_days:a.expires_in_days??30})}async inhouseStatus(a,b){return this.request("GET",`${c.API_V1_PREFIX}/inhouse/esign/status/${a}/`,void 0,void 0,!0,{signal:b?.signal})}async inhouseDownloadExecutedPdf(a){return this.blobRequest(`${c.API_V1_PREFIX}/inhouse/esign/executed/${a}/`)}async inhouseDownloadCertificate(a){return this.blobRequest(`${c.API_V1_PREFIX}/inhouse/esign/certificate/${a}/`)}async inhouseAudit(a,b){let d=new URLSearchParams;"number"==typeof b?.limit&&d.set("limit",String(b.limit));let e=String(d.toString()||""),f=e?`?${e}`:"";return this.request("GET",`${c.API_V1_PREFIX}/inhouse/esign/audit/${a}/${f}`)}async inhouseListSigningRequests(a){let b={};a?.q&&(b.q=a.q),a?.status&&(b.status=a.status),"number"==typeof a?.limit&&(b.limit=String(a.limit)),"number"==typeof a?.offset&&(b.offset=String(a.offset));let d=Object.keys(b).length?`?${new URLSearchParams(b).toString()}`:"";return this.request("GET",`${c.API_V1_PREFIX}/inhouse/esign/requests/${d}`)}async inhouseSignerSession(a,b){return this.request("GET",`${c.API_V1_PREFIX}/inhouse/esign/session/${a}/`,void 0,b?{"X-Device-Id":b}:void 0,!0,{auth:!1})}async inhouseSignerSign(a,b,d){return this.request("POST",`${c.API_V1_PREFIX}/inhouse/esign/sign/${a}/`,{signature_data_url:b},d?{"X-Device-Id":d}:void 0,!0,{auth:!1})}async getTenantAiPolicy(){return this.request("GET",`${c.API_V1_PREFIX}/ai/policy/`)}async updateTenantAiPolicy(a){return this.request("PUT",`${c.API_V1_PREFIX}/ai/policy/`,a)}async submitAiFeedback(a){return this.request("POST",`${c.API_V1_PREFIX}/ai/feedback/`,a)}async deleteContract(a){return this.request("DELETE",`${c.API_V1_PREFIX}/contracts/${a}/`)}async cloneContract(a,b){return this.request("POST",`${c.API_V1_PREFIX}/contracts/${a}/clone/`,{title:b})}async getContractVersions(a){return this.request("GET",`${c.API_V1_PREFIX}/contracts/${a}/versions/`)}async createContractVersion(a,b,d){return this.request("POST",`${c.API_V1_PREFIX}/contracts/${a}/versions/`,{change_summary:b,selected_clauses:d||[]})}async getContractStatistics(){return this.request("GET",`${c.API_V1_PREFIX}/contracts/statistics/`)}async getRecentContracts(a=5){return this.request("GET",`${c.API_V1_PREFIX}/contracts/recent/?limit=${a}`)}async getClauses(a){let b=a?"?"+new URLSearchParams(a).toString():"";return this.request("GET",`${c.API_V1_PREFIX}/clauses/${b}`)}async getConstraintsLibrary(a){let b=a?"?"+new URLSearchParams(a).toString():"";return this.request("GET",`${c.API_V1_PREFIX}/clauses/constraints-library/${b}`)}async createTemplate(a){return this.request("POST",`${c.API_V1_PREFIX}/contract-templates/`,a)}async getTemplates(){return this.request("GET",`${c.API_V1_PREFIX}/contract-templates/`)}async getTemplateById(a){return this.request("GET",`${c.API_V1_PREFIX}/contract-templates/${a}/`)}async updateTemplate(a,b){return this.request("PUT",`${c.API_V1_PREFIX}/contract-templates/${a}/`,b)}async deleteTemplate(a){return this.request("DELETE",`${c.API_V1_PREFIX}/contract-templates/${a}/`)}async getTemplateFile(a){return this.request("GET",`${c.API_V1_PREFIX}/templates/files/${a}/`,void 0,void 0,!0,{auth:!1})}async listTemplateFiles(){return this.request("GET",`${c.API_V1_PREFIX}/templates/files/`)}async createTemplateFile(a){return this.request("POST",`${c.API_V1_PREFIX}/templates/files/`,a)}async listMyTemplateFiles(){return this.request("GET",`${c.API_V1_PREFIX}/templates/files/mine/`)}async deleteTemplateFile(a){let b=encodeURIComponent(a);return this.request("DELETE",`${c.API_V1_PREFIX}/templates/files/delete/${b}/`)}async getTemplateFileContent(a){let b=encodeURIComponent(a);return this.request("GET",`${c.API_V1_PREFIX}/templates/files/content/${b}/`,void 0,void 0,!0,{auth:!1})}async getTemplateFileSchema(a){let b=encodeURIComponent(a);return this.request("GET",`${c.API_V1_PREFIX}/templates/files/schema/${b}/`,void 0,void 0,!0,{auth:!1})}async previewContractFromFile(a){return this.request("POST",`${c.API_V1_PREFIX}/contracts/preview-from-file/`,{filename:a.filename,structured_inputs:a.structuredInputs||{},selected_clauses:a.selectedClauses||[],custom_clauses:a.customClauses||[],constraints:a.constraints||[]})}async getTemplateFileSignatureFieldsConfig(a){let b=encodeURIComponent(a);return this.request("GET",`${c.API_V1_PREFIX}/templates/files/signature-fields-config/${b}/`)}async saveTemplateFileSignaturePositions(a,b){let d=encodeURIComponent(a);return this.request("POST",`${c.API_V1_PREFIX}/templates/files/drag-signature-positions/${d}/`,{positions:b})}async createWorkflow(a){return this.request("POST",`${c.API_V1_PREFIX}/workflows/`,a)}async getWorkflows(){return this.request("GET",`${c.API_V1_PREFIX}/workflows/`)}async getWorkflowById(a){return this.request("GET",`${c.API_V1_PREFIX}/workflows/${a}/`)}async updateWorkflow(a,b){return this.request("PUT",`${c.API_V1_PREFIX}/workflows/${a}/`,b)}async deleteWorkflow(a){return this.request("DELETE",`${c.API_V1_PREFIX}/workflows/${a}/`)}async getWorkflowInstances(a){return this.request("GET",`${c.API_V1_PREFIX}/workflows/${a}/instances/`)}async createApproval(a){return this.request("POST",`${c.API_V1_PREFIX}/approvals/`,a)}async getApprovals(a){let b=a?"?"+new URLSearchParams(a).toString():"";return this.request("GET",`${c.API_V1_PREFIX}/approvals/${b}`)}async getApprovalById(a){return this.request("GET",`${c.API_V1_PREFIX}/approvals/${a}/`)}async updateApproval(a,b){return this.request("PUT",`${c.API_V1_PREFIX}/approvals/${a}/`,b)}async approveRequest(a,b){return this.request("PUT",`${c.API_V1_PREFIX}/approvals/${a}/`,{status:"approved",comment:b})}async rejectRequest(a,b){return this.request("PUT",`${c.API_V1_PREFIX}/approvals/${a}/`,{status:"rejected",comment:b})}async getNotifications(a){let b=a?"?"+new URLSearchParams(a).toString():"";return this.request("GET",`/api/notifications/${b}`)}async createNotification(a){return this.request("POST","/api/notifications/",a)}async markNotificationAsRead(a){return this.request("PUT",`/api/notifications/${a}/`,{read:!0})}async listPrivateUploads(){return this.request("GET",`${c.API_V1_PREFIX}/private-uploads/`)}async getPrivateUploadUrl(a){let b=encodeURIComponent(a);return this.request("GET",`${c.API_V1_PREFIX}/private-uploads/url/?key=${b}`)}async deletePrivateUpload(a){let b=encodeURIComponent(a);return this.request("DELETE",`${c.API_V1_PREFIX}/private-uploads/?key=${b}`)}async uploadPrivateUpload(a){let b=new FormData;return b.append("file",a),this.multipartRequest("POST",`${c.API_V1_PREFIX}/private-uploads/`,b)}async uploadPrivateUploadWithProgress(a,b){let d=new FormData;return d.append("file",a),this.multipartRequestWithProgress("POST",`${c.API_V1_PREFIX}/private-uploads/`,d,b)}async listReviewContracts(a){let b=a?.q?`?q=${encodeURIComponent(a.q)}`:"";return this.request("GET",`${c.API_V1_PREFIX}/review-contracts/${b}`)}async getReviewContractById(a){return this.request("GET",`${c.API_V1_PREFIX}/review-contracts/${a}/`)}async uploadReviewContract(a,b){let d=new FormData;return d.append("file",a),b?.title&&d.append("title",b.title),"boolean"==typeof b?.analyze&&d.append("analyze",String(b.analyze)),this.multipartRequest("POST",`${c.API_V1_PREFIX}/review-contracts/`,d)}async uploadReviewContractWithProgress(a,b){let d=new FormData;return d.append("file",a),b?.title&&d.append("title",b.title),"boolean"==typeof b?.analyze&&d.append("analyze",String(b.analyze)),this.multipartRequestWithProgress("POST",`${c.API_V1_PREFIX}/review-contracts/`,d,{onProgress:b?.onProgress})}async deleteReviewContract(a){return this.request("DELETE",`${c.API_V1_PREFIX}/review-contracts/${a}/`)}async getReviewContractUrl(a){return this.request("GET",`${c.API_V1_PREFIX}/review-contracts/${a}/url/`)}async analyzeReviewContract(a){return this.request("POST",`${c.API_V1_PREFIX}/review-contracts/${a}/analyze/`,{})}async downloadReviewReportTxt(a){return this.blobRequest(`${c.API_V1_PREFIX}/review-contracts/${a}/report-txt/`)}async downloadReviewReportPdf(a){return this.blobRequest(`${c.API_V1_PREFIX}/review-contracts/${a}/report-pdf/`)}async listCalendarEvents(a){let b=new URLSearchParams({start:a.start,end:a.end}).toString();return this.request("GET",`${c.API_V1_PREFIX}/events/?${b}`)}async createCalendarEvent(a){return this.request("POST",`${c.API_V1_PREFIX}/events/`,a)}async updateCalendarEvent(a,b){return this.request("PATCH",`${c.API_V1_PREFIX}/events/${a}/`,b)}async deleteCalendarEvent(a){return this.request("DELETE",`${c.API_V1_PREFIX}/events/${a}/`)}async search(a,b){let c="?"+new URLSearchParams({q:a,...b}).toString();return this.request("GET",`/api/search/${c}`)}async semanticSearch(a){return this.request("GET",`/api/search/semantic/?q=${encodeURIComponent(a)}`)}async semanticSearchWithParams(a,b){let c=new URLSearchParams({q:a,...b||{}}).toString();return this.request("GET",`/api/search/semantic/?${c}`)}async advancedSearch(a){return this.request("POST","/api/search/advanced/",a)}async getSearchSuggestions(a){return this.request("GET",`/api/search/suggestions/?q=${encodeURIComponent(a)}`)}async listDocuments(){return this.request("GET","/api/documents/")}async getRepository(){return this.request("GET","/api/repository/")}async getRepositoryFolders(){return this.request("GET","/api/repository/folders/")}async createFolder(a,b){return this.request("POST","/api/repository/folders/",{name:a,parent_id:b})}async createMetadataField(a){return this.request("POST","/api/metadata/fields/",a)}async getMetadataFields(){return this.request("GET","/api/metadata/fields/")}async getHealth(){return this.request("GET",`${c.API_V1_PREFIX}/health/`)}}let d=new c;a.s(["ApiClient",()=>c,"apiClient",0,d])}];

//# sourceMappingURL=app_lib_api-client_ts_cce975a5._.js.map