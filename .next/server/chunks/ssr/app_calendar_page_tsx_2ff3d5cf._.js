module.exports=[37913,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(52072),e=a.i(98448),f=a.i(60702),g=a.i(13749),h=a.i(50522);let i=(0,a.i(70106).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var j=a.i(15618),k=a.i(81560);let l=(a,b)=>new Date(a.getFullYear(),a.getMonth(),a.getDate()+b),m=(a,b)=>a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate(),n=a=>String(a).padStart(2,"0"),o=a=>`${a.getFullYear()}-${n(a.getMonth()+1)}-${n(a.getDate())}`,p=a=>`${o(a)}T${n(a.getHours())}:${n(a.getMinutes())}`,q=a=>new Date(a),r=["SUN","MON","TUE","WED","THU","FRI","SAT"],s=a=>{switch(a){case"renewal":return{pill:"bg-orange-50 text-orange-700 border-orange-200",chip:"bg-orange-100 text-orange-700"};case"expiry":return{pill:"bg-rose-50 text-rose-700 border-rose-200",chip:"bg-rose-100 text-rose-700"};default:return{pill:"bg-sky-50 text-sky-700 border-sky-200",chip:"bg-sky-100 text-sky-700"}}},t=(a,b)=>{let c=q(a.start_datetime),d=q(a.end_datetime),e=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);return c<=new Date(b.getFullYear(),b.getMonth(),b.getDate(),23,59,59)&&d>=e};function u(){let[a,n]=(0,c.useState)("month"),[u,v]=(0,c.useState)(()=>new Date),[w,x]=(0,c.useState)(()=>new Date),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)("meeting"),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(()=>p(new Date)),[U,V]=(0,c.useState)(()=>{let a=new Date;return a.setHours(a.getHours()+1),p(a)}),W=(0,c.useMemo)(()=>{let a=new Date(u.getFullYear(),u.getMonth(),1),b=new Date(u.getFullYear(),u.getMonth()+1,0),c=l(a,-a.getDay()),d=l(b,6-b.getDay());return{start:a,end:b,gridStart:c,gridEnd:d}},[u]),X=(0,c.useMemo)(()=>{let a=l(w,-w.getDay()),b=l(a,6);return{start:a,end:b}},[w]),Y=(0,c.useMemo)(()=>{let a=[];for(let b=0;b<7;b++)a.push(l(X.start,b));return a},[X.start]),Z=(0,c.useMemo)(()=>{let a=[],b=new Date(W.gridStart);for(;b<=W.gridEnd;)a.push(new Date(b)),b=l(b,1);return a},[W.gridStart,W.gridEnd]),$=(0,c.useMemo)(()=>y.filter(a=>t(a,w)),[y,w]),_=(0,c.useMemo)(()=>y.filter(a=>{let b=q(a.start_datetime);return b.getFullYear()===u.getFullYear()&&b.getMonth()===u.getMonth()}),[y,u]),aa=async()=>{B(!0),D(null);try{let a=new e.ApiClient,b=o(W.gridStart),c=o(l(W.gridEnd,1)),d=await a.listCalendarEvents({start:b,end:c});if(!d.success)throw Error(d.error||"Failed to load events");z(d.data?.results||[])}catch(a){D(a instanceof Error?a.message:"Failed to load events")}finally{B(!1)}},ab=async()=>{try{let a=new e.ApiClient,b=await a.getContracts({page_size:"50"});if(!b.success)return;let c=b.data?.results||b.data||[],d=(Array.isArray(c)?c:[]).map(a=>({id:String(a.id||a.contract_id||""),title:String(a.title||a.name||"Untitled")})).filter(a=>a.id);F(d)}catch{}};(0,c.useEffect)(()=>{aa()},[W.gridStart,W.gridEnd]),(0,c.useEffect)(()=>{ab()},[]);let ac=a=>{let b=new Date(a);b.setHours(9,0,0,0);let c=new Date(a);c.setHours(10,0,0,0),H(null),J(""),L(""),N(""),P("meeting"),R(""),T(p(b)),V(p(c))},ad=a=>{x(a),ac(a)},ae=a=>{H(a),J(a.title||""),L(a.summary||""),N(a.description||""),P(a.category||"meeting"),R(a.associated_contract_id||"");let b=q(a.start_datetime),c=q(a.end_datetime);T(p(b)),V(p(c)),x(b)},af=async()=>{B(!0),D(null);try{let a=new e.ApiClient,b=E.find(a=>a.id===Q)?.title||"",c={title:I.trim()||"Untitled Event",summary:K.trim(),description:M.trim(),category:O,associated_contract_id:Q||null,associated_contract_title:b,start_datetime:new Date(S).toISOString(),end_datetime:new Date(U).toISOString(),all_day:!1};if(G){let b=await a.updateCalendarEvent(G.id,c);if(!b.success)throw Error(b.error||"Failed to update event")}else{let b=await a.createCalendarEvent(c);if(!b.success)throw Error(b.error||"Failed to create event")}await aa()}catch(a){D(a instanceof Error?a.message:"Failed to save event")}finally{B(!1)}},ag=async()=>{if(G&&window.confirm("Delete this event?")){B(!0),D(null);try{let a=new e.ApiClient,b=await a.deleteCalendarEvent(G.id);if(!b.success)throw Error(b.error||"Failed to delete event");H(null),ac(w),await aa()}catch(a){D(a instanceof Error?a.message:"Failed to delete event")}finally{B(!1)}}};return(0,b.jsx)(d.default,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)("h1",{className:"text-3xl font-extrabold text-slate-900",children:"Calendar & Events"})})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-8",children:(0,b.jsxs)("div",{className:"bg-white rounded-[28px] p-5 md:p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"text-xl font-extrabold text-slate-900",children:u.toLocaleDateString(void 0,{month:"long",year:"numeric"})}),(0,b.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",className:"w-9 h-9 rounded-xl bg-slate-100 hover:bg-slate-200 text-slate-700 flex items-center justify-center",onClick:()=>v(new Date(u.getFullYear(),u.getMonth()-1,1)),"aria-label":"Previous month",children:(0,b.jsx)(g.ChevronLeft,{className:"w-4 h-4"})}),(0,b.jsx)("button",{type:"button",className:"w-9 h-9 rounded-xl bg-slate-100 hover:bg-slate-200 text-slate-700 flex items-center justify-center",onClick:()=>v(new Date(u.getFullYear(),u.getMonth()+1,1)),"aria-label":"Next month",children:(0,b.jsx)(h.ChevronRight,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between md:justify-end gap-3",children:[(0,b.jsx)("div",{className:"inline-flex rounded-xl bg-slate-100 p-1",children:["month","week","list"].map(c=>(0,b.jsx)("button",{type:"button",onClick:()=>n(c),className:`px-3 py-1.5 text-sm font-semibold rounded-lg transition ${a===c?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:"month"===c?"Month":"week"===c?"Week":"List"},c))}),(0,b.jsxs)("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full bg-[#FF5C7A] text-white px-5 py-2.5 text-sm font-semibold hover:bg-[#ff4a6c]",onClick:()=>ad(w),children:[(0,b.jsx)(j.Plus,{className:"w-4 h-4"}),"Add Event"]})]})]}),C&&(0,b.jsx)("div",{className:"mt-4 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:C}),(0,b.jsxs)("div",{className:"mt-5 rounded-2xl border border-slate-200 overflow-hidden",children:["month"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-7 bg-slate-50",children:r.map(a=>(0,b.jsx)("div",{className:"px-3 py-2 text-[11px] font-bold text-slate-500 tracking-wide",children:a},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7",children:Z.map(a=>{let c=a.getMonth()===u.getMonth(),d=m(a,w),e=y.filter(b=>t(b,a)),f=e.slice(0,2),g=Math.max(e.length-f.length,0);return(0,b.jsxs)("button",{type:"button",onClick:()=>{x(a),G||ac(a)},onDoubleClick:()=>ad(a),className:`min-h-[92px] border-t border-slate-200 border-r border-slate-200 text-left px-3 py-2 transition hover:bg-slate-50 ${!c?"bg-slate-50/60 text-slate-400":"bg-white"} ${d?"outline outline-2 outline-[#FF5C7A] outline-offset-[-2px]":""}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)("div",{className:`text-sm font-semibold ${c?"text-slate-900":"text-slate-400"}`,children:a.getDate()}),m(a,new Date)&&(0,b.jsx)("div",{className:"text-[10px] font-bold text-white bg-[#FF5C7A] rounded-full px-2 py-0.5",children:"Today"})]}),(0,b.jsxs)("div",{className:"mt-2 space-y-1",children:[f.map(a=>{let c=s(a.category);return(0,b.jsx)("div",{className:`text-[10px] font-semibold rounded-md px-2 py-1 truncate ${c.chip}`,title:a.title,children:a.title},a.id)}),g>0&&(0,b.jsxs)("div",{className:"text-[10px] font-semibold text-slate-500",children:["+",g," more"]})]})]},a.toISOString())})})]}),"week"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-7 bg-slate-50",children:Y.map(a=>(0,b.jsxs)("div",{className:"px-3 py-2",children:[(0,b.jsx)("div",{className:"text-[11px] font-bold text-slate-500 tracking-wide",children:r[a.getDay()]}),(0,b.jsx)("div",{className:"text-sm font-extrabold text-slate-900",children:a.getDate()})]},a.toISOString()))}),(0,b.jsx)("div",{className:"grid grid-cols-7",children:Y.map(a=>{let c=m(a,w),d=y.filter(b=>t(b,a)),e=d.slice(0,3),f=Math.max(d.length-e.length,0);return(0,b.jsx)("button",{type:"button",onClick:()=>{x(a),G||ac(a)},onDoubleClick:()=>ad(a),className:`min-h-[140px] border-t border-slate-200 border-r border-slate-200 text-left px-3 py-2 transition hover:bg-slate-50 bg-white ${c?"outline outline-2 outline-[#FF5C7A] outline-offset-[-2px]":""}`,children:(0,b.jsxs)("div",{className:"mt-1 space-y-1",children:[e.map(a=>{let c=s(a.category);return(0,b.jsx)("div",{className:`text-[10px] font-semibold rounded-md px-2 py-1 truncate ${c.chip}`,title:a.title,children:a.title},a.id)}),f>0&&(0,b.jsxs)("div",{className:"text-[10px] font-semibold text-slate-500",children:["+",f," more"]})]})},a.toISOString())})})]}),"list"===a&&(0,b.jsx)("div",{className:"divide-y divide-slate-100",children:0===_.length?(0,b.jsx)("div",{className:"px-5 py-6 text-sm text-slate-500",children:"No events this month"}):_.slice().sort((a,b)=>a.start_datetime.localeCompare(b.start_datetime)).map(a=>{let c=q(a.start_datetime),d=c.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});return(0,b.jsx)("button",{type:"button",className:"w-full px-5 py-4 text-left hover:bg-slate-50",onClick:()=>ae(a),children:(0,b.jsx)("div",{className:"flex items-center justify-between gap-3",children:(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm font-extrabold text-slate-900 truncate",children:a.title}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:[c.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})," • ",d]})]})})},a.id)})})]}),(0,b.jsx)("div",{className:"mt-3 text-xs text-slate-500",children:"Tip: double-click a day to create an event."})]})}),(0,b.jsx)("div",{className:"lg:col-span-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-[28px] p-5 md:p-6 shadow-sm h-full",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-lg font-extrabold text-slate-900",children:"Event Details"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",className:"w-9 h-9 rounded-xl bg-slate-100 hover:bg-slate-200 text-slate-700 flex items-center justify-center","aria-label":"Edit",onClick:()=>{$[0]&&ae($[0])},disabled:!$[0],children:(0,b.jsx)(i,{className:"w-4 h-4"})}),(0,b.jsx)("button",{type:"button",className:"w-9 h-9 rounded-xl bg-slate-100 hover:bg-slate-200 text-slate-700 flex items-center justify-center","aria-label":"Delete",onClick:ag,disabled:!G,children:(0,b.jsx)(k.Trash2,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-slate-50 p-4 flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"w-12 h-12 rounded-2xl bg-white border border-slate-200 flex flex-col items-center justify-center",children:[(0,b.jsx)("div",{className:"text-[10px] font-extrabold text-rose-500",children:w.toLocaleDateString(void 0,{month:"short"}).toUpperCase()}),(0,b.jsx)("div",{className:"text-sm font-extrabold text-slate-900",children:w.getDate()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-bold text-slate-900",children:w.toLocaleDateString(void 0,{weekday:"long"})}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:[$.length," Events scheduled"]})]})]}),$.length>0&&(0,b.jsxs)("div",{className:"mt-4 rounded-2xl border border-slate-200 overflow-hidden",children:[(0,b.jsx)("div",{className:"px-4 py-3 bg-white border-b border-slate-100",children:(0,b.jsx)("div",{className:"text-[11px] font-bold text-slate-500 tracking-wide",children:"TODAY'S EVENTS"})}),(0,b.jsxs)("div",{className:"divide-y divide-slate-100 bg-white",children:[$.slice(0,5).map(a=>{let c=q(a.start_datetime),d=q(a.end_datetime),e=`${c.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})} - ${d.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}`,f=G?.id===a.id;return(0,b.jsx)("button",{type:"button",className:`w-full px-4 py-3 text-left hover:bg-slate-50 ${f?"bg-rose-50/60":""}`,onClick:()=>ae(a),children:(0,b.jsx)("div",{className:"flex items-center justify-between gap-3",children:(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm font-extrabold text-slate-900 truncate",children:a.title}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:e})]})})},a.id)}),$.length>5&&(0,b.jsxs)("div",{className:"px-4 py-3 text-xs text-slate-500",children:["+",$.length-5," more"]})]})]}),(0,b.jsxs)("div",{className:"mt-5 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[11px] font-bold text-slate-500 tracking-wide",children:"EVENT TITLE"}),(0,b.jsx)("input",{value:I,onChange:a=>J(a.target.value),className:"mt-2 w-full bg-white border border-slate-200 rounded-xl px-4 py-3 text-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-rose-200",placeholder:"Vendor Renewal"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[11px] font-bold text-slate-500 tracking-wide",children:"START"}),(0,b.jsx)("input",{type:"datetime-local",value:S,onChange:a=>T(a.target.value),className:"mt-2 w-full bg-white border border-slate-200 rounded-xl px-4 py-3 text-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-rose-200"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[11px] font-bold text-slate-500 tracking-wide",children:"END"}),(0,b.jsx)("input",{type:"datetime-local",value:U,onChange:a=>V(a.target.value),className:"mt-2 w-full bg-white border border-slate-200 rounded-xl px-4 py-3 text-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-rose-200"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[11px] font-bold text-slate-500 tracking-wide",children:"ASSOCIATED CONTRACT"}),(0,b.jsxs)("div",{className:"mt-2 relative",children:[(0,b.jsxs)("select",{value:Q,onChange:a=>R(a.target.value),className:"w-full appearance-none bg-white border border-slate-200 rounded-xl px-4 py-3 pr-10 text-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-rose-200",children:[(0,b.jsx)("option",{value:"",children:"Select contract"}),E.map(a=>(0,b.jsx)("option",{value:a.id,children:a.title},a.id))]}),(0,b.jsx)(f.CalendarDays,{className:"w-4 h-4 text-slate-400 absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[11px] font-bold text-slate-500 tracking-wide",children:"SUMMARY"}),(0,b.jsx)("input",{value:K,onChange:a=>L(a.target.value),className:"mt-2 w-full bg-white border border-slate-200 rounded-xl px-4 py-3 text-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-rose-200",placeholder:"Short summary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[11px] font-bold text-slate-500 tracking-wide",children:"DESCRIPTION"}),(0,b.jsx)("textarea",{value:M,onChange:a=>N(a.target.value),rows:4,className:"mt-2 w-full bg-white border border-slate-200 rounded-xl px-4 py-3 text-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-rose-200 resize-none",placeholder:"Discussion about renewal terms..."})]}),(0,b.jsx)("button",{type:"button",onClick:af,disabled:A,className:"w-full mt-2 inline-flex items-center justify-center rounded-full bg-[#FF5C7A] text-white px-6 py-3 text-sm font-extrabold hover:bg-[#ff4a6c] disabled:opacity-60",children:"Save Changes"}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:A?"Working…":G?"Editing existing event":"Creating new event"})]})]})})]})]})})}a.s(["default",()=>u],37913)}];

//# sourceMappingURL=app_calendar_page_tsx_2ff3d5cf._.js.map